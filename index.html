<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>曾鑫 · 2025音乐剧演出年度报告</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        /* ====== 基础重置与全局样式 ====== */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', 'Microsoft YaHei', 'PingFang SC', sans-serif;
        }

        body {
            background: linear-gradient(135deg, #0c0b1f 0%, #1a1b2e 100%);
            color: #e6e6e6;
            min-height: 100vh;
            padding: 20px;
            overflow-x: hidden;
            line-height: 1.6;
        }

        /* ====== 报告主容器 ====== */
        .report-container {
            max-width: 1200px;
            margin: 0 auto;
            background: rgba(25, 26, 48, 0.92);
            backdrop-filter: blur(10px);
            border-radius: 28px;
            box-shadow: 0 30px 60px rgba(0, 0, 0, 0.6),
                        inset 0 1px 0 rgba(255, 255, 255, 0.1);
            overflow: hidden;
            border: 1px solid rgba(255, 255, 255, 0.05);
            position: relative;
            z-index: 1;
        }

        /* ====== 标题区域 ====== */
        .header {
    background: url('https://cdn.jsdelivr.net/gh/LinMiaolong/Zengxin_photos@main/title.jpg')
                center/cover no-repeat;
            color: white;
            padding: 70px 40px 50px;
            text-align: center;
            position: relative;
            border-radius: 28px 28px 0 0;
            overflow: hidden;
        }
/* 15% 黑色蒙版，叠在图上方、文字下方 */
.header::before {
    content: '';
    position: absolute;
    inset: 0;
    background: rgba(0,0,0,0.35);
    z-index: 1;
}


        .header::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: url('https://images.unsplash.com/photo-1511379938547-c1f69419868d?ixlib=rb-4.0.3&auto=format&fit=crop&w=1200&q=80') center/cover;
            opacity: 0.15;
            mix-blend-mode: overlay;
            z-index: 1;
        }

        .header-content {
            position: relative;
            z-index: 2;
        }

        .header .icon {
            font-size: 64px;
            margin-bottom: 25px;
            filter: drop-shadow(0 6px 12px rgba(0,0,0,0.3));
            animation: iconFloat 3s ease-in-out infinite;
        }

        @keyframes iconFloat {
            0%, 100% { transform: translateY(0px) rotate(0deg); }
            50% { transform: translateY(-15px) rotate(5deg); }
        }

        .header h1 {
            font-size: 44px;
            font-weight: 800;
            margin-bottom: 15px;
            letter-spacing: -0.5px;
            text-shadow: 0 4px 15px rgba(0,0,0,0.4);
        }

        .header p {
            font-size: 20px;
            opacity: 0.95;
            font-weight: 300;
            max-width: 800px;
            margin: 0 auto;
        }

        /* ====== 通用区块样式 ====== */
        .data-section, .cross-city-section, .special-section, .partner-section, .summary-section {
            padding: 50px 40px;
            position: relative;
        }

        .data-section {
            background: rgba(30, 31, 56, 0.6);
        }

        .cross-city-section {
            background: rgba(20, 21, 40, 0.8);
        }

        .special-section {
            background: rgba(30, 31, 56, 0.7);
        }

        .partner-section {
            background: rgba(20, 21, 40, 0.8);
        }

        .summary-section {
            background: rgba(30, 31, 56, 0.6);
        }

        /* ====== 区块标题样式 ====== */
        .section-title {
            font-size: 32px;
            font-weight: 700;
            margin-bottom: 40px;
            display: flex;
            align-items: center;
            color: #fff;
            position: relative;
        }

        .section-title i {
            font-size: 26px;
            margin-right: 18px;
            color: #ff8a00;
            background: rgba(255, 138, 0, 0.15);
            width: 60px;
            height: 60px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.4s ease;
        }

        .section-title:hover i {
            transform: scale(1.15) rotate(15deg);
            background: rgba(255, 138, 0, 0.25);
            box-shadow: 0 0 25px rgba(255, 138, 0, 0.4);
        }

        .section-title::after {
            content: '';
            flex: 1;
            height: 3px;
            margin-left: 25px;
            background: linear-gradient(90deg, 
                rgba(255, 87, 104, 0.8), 
                rgba(255, 138, 0, 0.8), 
                transparent);
            border-radius: 2px;
        }

        /* ====== 核心数据卡片 ====== */
        .data-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 30px;
            margin-bottom: 60px;
        }

        .data-card {
            background: linear-gradient(145deg, 
                rgba(40, 42, 75, 0.9) 0%, 
                rgba(30, 32, 58, 0.9) 100%);
            border-radius: 22px;
            padding: 40px 30px;
            text-align: center;
            border: 1px solid rgba(255, 255, 255, 0.08);
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.3),
                        inset 0 1px 0 rgba(255, 255, 255, 0.05);
            transition: all 0.5s cubic-bezier(0.22, 0.61, 0.36, 1);
            cursor: pointer;
            position: relative;
            overflow: hidden;
        }

        .data-card:hover {
            transform: translateY(-12px) scale(1.02);
            border-color: rgba(255, 138, 0, 0.4);
            box-shadow: 0 25px 50px -10px rgba(255, 87, 104, 0.25),
                        inset 0 1px 0 rgba(255, 255, 255, 0.1);
        }

        .data-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, 
                transparent, 
                rgba(255, 255, 255, 0.1), 
                transparent);
            transition: left 0.8s ease;
        }

        .data-card:hover::before {
            left: 100%;
        }

        .data-card .icon {
            font-size: 48px;
            color: #ff8a00;
            margin-bottom: 25px;
            transition: all 0.4s ease;
        }

        .data-card:hover .icon {
            color: #ff5768;
            transform: scale(1.2) rotate(10deg);
        }

        .data-card .num {
            font-size: 68px;
            font-weight: 800;
            background: linear-gradient(135deg, #ff8a00, #ff5768, #ff8a00);
            background-size: 200% auto;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 10px;
            line-height: 1;
            letter-spacing: -2px;
            animation: gradientShift 3s ease infinite;
        }

        @keyframes gradientShift {
            0% { background-position: 0% center; }
            50% { background-position: 100% center; }
            100% { background-position: 0% center; }
        }

        .data-card .desc {
            font-size: 18px;
            color: #bbb;
            font-weight: 400;
        }

        /* ====== 交互面板（表格、搜索、分页） ====== */
        .interactive-panel {
            margin-top: 25px;
            padding: 30px;
            background: rgba(30, 31, 56, 0.85);
            border-radius: 20px;
            border: 1px solid rgba(255, 255, 255, 0.08);
            box-shadow: 0 15px 40px rgba(0, 0, 0, 0.3);
            display: none;
            max-height: 700px;
            overflow-y: auto;
            position: relative;
        }

        .interactive-panel.active {
            display: block;
            animation: panelSlideIn 0.6s cubic-bezier(0.22, 0.61, 0.36, 1) forwards;
        }

        @keyframes panelSlideIn {
            from { 
                opacity: 0; 
                transform: translateY(30px) scale(0.98); 
            }
            to { 
                opacity: 1; 
                transform: translateY(0) scale(1); 
            }
        }

        /* 搜索框样式 */
        .search-box {
            margin-bottom: 25px;
            display: flex;
            gap: 15px;
            align-items: center;
        }

        .search-box input {
            flex: 1;
            padding: 15px 22px;
            background: rgba(20, 21, 40, 0.9);
            border: 2px solid rgba(255, 138, 0, 0.3);
            border-radius: 14px;
            color: #fff;
            font-size: 16px;
            outline: none;
            transition: all 0.3s ease;
        }

        .search-box input:focus {
            border-color: #ff8a00;
            box-shadow: 0 0 0 4px rgba(255, 138, 0, 0.2);
            background: rgba(20, 21, 40, 1);
        }

        .search-box button {
            padding: 15px 28px;
            background: linear-gradient(135deg, #ff8a00, #ff5768);
            color: white;
            border: none;
            border-radius: 14px;
            cursor: pointer;
            font-weight: 600;
            font-size: 16px;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .search-box button:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 25px rgba(255, 87, 104, 0.4);
        }

        .search-box button#reset-btn {
            background: linear-gradient(135deg, #6c757d, #495057);
        }

        .search-box button#reset-btn:hover {
            box-shadow: 0 10px 25px rgba(108, 117, 125, 0.4);
        }

        /* 搜索结果统计 */
        .search-result-info {
            margin-bottom: 20px;
            padding: 15px 20px;
            background: rgba(255, 138, 0, 0.1);
            border-left: 5px solid #ff8a00;
            border-radius: 10px;
            font-size: 16px;
            color: #ffc107;
        }

        /* 表格样式 */
        .performance-table {
            width: 100%;
            border-collapse: separate;
            border-spacing: 0;
            font-size: 15px;
            margin-top: 10px;
            border-radius: 12px;
            overflow: hidden;
        }

        .performance-table th {
            background: linear-gradient(135deg, 
                rgba(255, 138, 0, 0.25), 
                rgba(255, 87, 104, 0.25));
            color: #ff8a00;
            font-weight: 700;
            padding: 20px 15px;
            text-align: left;
            border-bottom: 2px solid rgba(255, 138, 0, 0.4);
            position: sticky;
            top: 0;
            backdrop-filter: blur(10px);
            z-index: 10;
        }

        .performance-table td {
            padding: 18px 15px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.05);
            color: #ddd;
            transition: all 0.2s ease;
        }

        .performance-table tr {
            background: rgba(40, 42, 75, 0.5);
            transition: all 0.3s ease;
        }

        .performance-table tr:nth-child(even) {
            background: rgba(40, 42, 75, 0.3);
        }

        .performance-table tr:hover {
            background: rgba(255, 138, 0, 0.15);
            transform: translateX(5px);
        }

        .performance-table tr:hover td {
            color: #fff;
        }

        /* 分页控件 */
        .pagination {
            display: flex;
            justify-content: center;
            align-items: center;
            margin-top: 30px;
            gap: 10px;
        }

        .pagination button {
            padding: 12px 20px;
            background: rgba(40, 42, 75, 0.9);
            border: 1px solid rgba(255, 138, 0, 0.4);
            border-radius: 10px;
            cursor: pointer;
            color: #ff8a00;
            font-weight: 600;
            font-size: 15px;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .pagination button:hover:not(:disabled) {
            background: rgba(255, 138, 0, 0.2);
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(255, 138, 0, 0.2);
        }

        .pagination button.active {
            background: linear-gradient(135deg, #ff8a00, #ff5768);
            color: white;
            border-color: #ff8a00;
            box-shadow: 0 5px 15px rgba(255, 138, 0, 0.3);
        }

        .pagination button:disabled {
            opacity: 0.4;
            cursor: not-allowed;
            transform: none !important;
        }

        .page-info {
            color: #aaa;
            font-size: 15px;
            margin: 0 20px;
            min-width: 150px;
            text-align: center;
        }

        /* 页码数字容器 */
        #page-numbers {
            display: flex;
            gap: 5px;
        }

        /* ====== 优化后的跨城连打地图 ====== */
        .city-map-container {
            width: 100%;
            height: 550px;
            background: #141526;
            border-radius: 22px;
            overflow: hidden;
            position: relative;
            border: 1px solid rgba(255, 255, 255, 0.08);
            box-shadow: 0 20px 50px rgba(0, 0, 0, 0.5);
            margin-top: 30px;
        }

        /* 简化地图背景 - 只显示四个城市区域 */
        .map-bg {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: 
                radial-gradient(circle at 75% 70%, rgba(255, 138, 0, 0.05) 0%, transparent 50%),
                radial-gradient(circle at 45% 50%, rgba(255, 87, 104, 0.05) 0%, transparent 50%),
                radial-gradient(circle at 55% 60%, rgba(155, 81, 224, 0.05) 0%, transparent 50%),
                radial-gradient(circle at 85% 52%, rgba(65, 105, 225, 0.05) 0%, transparent 50%);
            z-index: 0;
        }

        /* 城市点样式 */
.city-point {
    position: absolute;
    width: 22px;
    height: 22px;
    background: linear-gradient(35deg, #ff8a00, #ff5768);
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    color: white;
    font-size: 8px;
    box-shadow: 
        0 6px 20px rgba(255, 87, 104, 0.5),
        inset 0 1px 0 rgba(255, 255, 255, 0.3),
        0 0 0 3px rgba(25, 26, 48, 0.8);
    z-index: 20;
    cursor: pointer;
    transition: all 0.4s cubic-bezier(0.22, 0.61, 0.36, 1);
    border: 1px solid rgba(255, 255, 255, 0.9);
}

/* 城市点位置 - 使用百分比定位 */
.city-point.guangzhou { left: 20%; top: 80%; }
.city-point.wuhan { left: 28%; top: 20%; }
.city-point.changsha { left: 18%; top: 40%; }
.city-point.shanghai { left: 60%; top: 15%; }

.city-point:hover {
    transform: scale(1.15) rotate(3deg);
    box-shadow: 
        0 15px 40px rgba(255, 87, 104, 0.7),
        inset 0 1px 0 rgba(255, 255, 255, 0.3),
        0 0 0 8px rgba(25, 26, 48, 0.9);
    z-index: 30;
}
      
      

        /* 动态连线容器 */
        .city-lines-container {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 10;
            pointer-events: none;
        }

        /* 单条连线 */
        .city-line {
    position: absolute;
    height: 3px;
    background: linear-gradient(90deg, 
        transparent, 
        var(--line-color, #ff8a00), 
        var(--line-color, #ff8a00), 
        transparent);
    transform-origin: 0 0;
    z-index: 5;
    border-radius: 2px;
    filter: drop-shadow(0 0 8px var(--line-color, #ff8a00));
}


        /* 连线动画 */
        @keyframes lineFlow {
            0% { background-position: -100% 0; }
            100% { background-position: 200% 0; }
        }

        /* 飞行点动画 */
        @keyframes flyDot {
            0% { 
                left: 0%; 
                opacity: 0; 
                transform: translateY(-50%) scale(0.5);
            }
            10% { 
                opacity: 1; 
                transform: translateY(-50%) scale(1);
            }
            90% { 
                opacity: 1; 
                transform: translateY(-50%) scale(1);
            }
            100% { 
                left: 100%; 
                opacity: 0; 
                transform: translateY(-50%) scale(0.5);
            }
        }

        .flying-dot {
            position: absolute;
            width: 12px;
            height: 12px;
            background: white;
            border-radius: 50%;
            box-shadow: 0 0 15px var(--dot-color, #ff5768);
            z-index: 12;
            pointer-events: none;
            top: 50%;
            transform: translateY(-50%);
        }

        /* 城市标签 */
        .map-label {
            position: absolute;
            color: white;
            font-weight: 500;
            font-size: 12px;
          	 transform: translate(-50%, -50%) !important;
            background: rgba(25, 26, 48, 0.92);
            padding: 8px 10px;
            border-radius: 14px;
            border-left: 5px solid #ff8a00;
            z-index: 25;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.4);
            backdrop-filter: blur(10px);
            line-height: 1.4;
            transition: all 0.3s ease;
            cursor: pointer;
          	 padding: 8px 12px !important;
            font-size: 14px !important;
            transform: translate(-50%, -50%) !important;
            width: auto !important;
            min-width: 80px !important;
            backdrop-filter: blur(10px) !important;
        }

        .map-label:hover {
            transform: translateY(-5px);
            box-shadow: 0 12px 30px rgba(0, 0, 0, 0.5);
            border-left-color: #ff5768;
        }
      	 .map-label span {
            font-size: 12px !important;
        }
		

        .map-label span {
            display: block;
            font-size: 14px;
            color: #ff8a00;
            font-weight: 600;
            margin-top: 5px;
        }

        /* 地图备注 */
        .map-note {
            position: absolute;
            bottom: 25px;
            left: 25px;
            background: rgba(25, 26, 48, 0.95);
            padding: 18px 24px;
            border-radius: 16px;
            font-size: 15px;
            color: #ccc;
            border: 1px solid rgba(255, 255, 255, 0.1);
            z-index: 30;
            max-width: 350px;
            backdrop-filter: blur(10px);
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.4);
        }

        .map-note i {
            color: #ff8a00;
            margin-right: 10px;
            font-size: 18px;
        }

        .map-note strong {
            color: #fff;
            display: block;
            margin-bottom: 10px;
            font-size: 16px;
        }

        .map-note span {
            color: #ff8a00;
            font-weight: 600;
        }

        /* ====== 图表容器 ====== */
        .chart-wrap {
            margin-top: 40px;
            height: 380px;
            background: rgba(30, 31, 56, 0.8);
            border-radius: 22px;
            padding: 30px;
            border: 1px solid rgba(255, 255, 255, 0.08);
            box-shadow: 0 15px 40px rgba(0, 0, 0, 0.3);
            position: relative;
            overflow: hidden;
        }

        .chart-wrap::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 5px;
            background: linear-gradient(90deg, 
                #ff8a00, #ff5768, #9b51e0, #ff8a00);
            background-size: 300% 100%;
            border-radius: 22px 22px 0 0;
            animation: gradientFlow 4s linear infinite;
        }

        @keyframes gradientFlow {
            0% { background-position: 0% 0; }
            100% { background-position: 300% 0; }
        }

        /* ====== 特殊场次时间轴 ====== */
        .timeline {
            position: relative;
            margin-top: 35px;
            padding-left: 40px;
        }

        .timeline::before {
            content: '';
            position: absolute;
            top: 0;
            left: 20px;
            height: 100%;
            width: 4px;
            background: linear-gradient(to bottom, 
                rgba(255, 138, 0, 0.9), 
                rgba(255, 87, 104, 0.9),
                rgba(155, 81, 224, 0.9));
            border-radius: 2px;
            box-shadow: 0 0 20px rgba(255, 87, 104, 0.3);
        }

        .timeline-item {
            position: relative;
            margin-bottom: 40px;
            opacity: 0;
            transform: translateX(-30px);
            animation: timelineAppear 0.7s cubic-bezier(0.22, 0.61, 0.36, 1) forwards;
            cursor: pointer;
        }

        @keyframes timelineAppear {
            to { 
                opacity: 1; 
                transform: translateX(0); 
            }
        }

        .timeline-item:nth-child(1) { animation-delay: 0.1s; }
        .timeline-item:nth-child(2) { animation-delay: 0.2s; }
        .timeline-item:nth-child(3) { animation-delay: 0.3s; }
        .timeline-item:nth-child(4) { animation-delay: 0.4s; }
        .timeline-item:nth-child(5) { animation-delay: 0.5s; }
        .timeline-item:nth-child(6) { animation-delay: 0.6s; }
        .timeline-item:nth-child(7) { animation-delay: 0.7s; }
        .timeline-item:nth-child(8) { animation-delay: 0.8s; }
        .timeline-item:nth-child(9) { animation-delay: 0.9s; }
        .timeline-item:nth-child(10) { animation-delay: 1.0s; }

        .timeline-item::before {
            content: '';
            position: absolute;
            left: -38px;
            top: 8px;
            width: 24px;
            height: 24px;
            border-radius: 50%;
            background: #1a1b2e;
            border: 5px solid #ff8a00;
            box-shadow: 
                0 0 0 6px rgba(255, 138, 0, 0.25),
                0 0 25px rgba(255, 87, 104, 0.6);
            z-index: 2;
            transition: all 0.4s ease;
        }

        .timeline-item:hover::before {
            background: #ff8a00;
            transform: scale(1.3);
            box-shadow: 0 0 0 10px rgba(255, 138, 0, 0.3),
                        0 0 35px rgba(255, 87, 104, 0.8);
        }

        .timeline-item .date {
            font-size: 17px;
            color: #ff8a00;
            margin-bottom: 12px;
            display: flex;
            align-items: center;
            font-weight: 600;
        }

        .timeline-item .date i {
            font-size: 16px;
            margin-right: 10px;
        }

        .timeline-item .content {
            background: linear-gradient(145deg, 
                rgba(40, 42, 75, 0.95) 0%, 
                rgba(30, 32, 58, 0.95) 100%);
            padding: 28px 32px;
            border-radius: 18px;
            border-left: 6px solid #ff8a00;
            box-shadow: 0 12px 30px rgba(0, 0, 0, 0.4);
            transition: all 0.4s cubic-bezier(0.22, 0.61, 0.36, 1);
            position: relative;
            overflow: hidden;
        }

        .timeline-item .content:hover {
            transform: translateX(15px);
            border-left-color: #ff5768;
            box-shadow: 0 20px 40px rgba(255, 87, 104, 0.2);
        }

        .timeline-item .content::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, 
                transparent, 
                rgba(255, 255, 255, 0.05), 
                transparent);
            transition: left 0.8s ease;
        }

        .timeline-item .content:hover::before {
            left: 100%;
        }

        .timeline-item .content .label {
            display: inline-block;
            background: linear-gradient(135deg, #ff5768, #ff8a00);
            color: white;
            font-size: 14px;
            padding: 8px 18px;
            border-radius: 30px;
            margin-left: 20px;
            float: right;
            transition: all 0.3s ease;
            box-shadow: 0 6px 20px rgba(255, 87, 104, 0.3);
            font-weight: 600;
        }

        .timeline-item .content .label:hover {
            transform: scale(1.08) translateY(-3px);
            box-shadow: 0 10px 25px rgba(255, 87, 104, 0.5);
        }

        /* ====== 年度合作演员区 ====== */
        .partner-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 30px;
            margin-top: 35px;
        }

        .partner-card {
            background: linear-gradient(145deg, 
                rgba(40, 42, 75, 0.95) 0%, 
                rgba(30, 32, 58, 0.95) 100%);
            border-radius: 20px;
            text-align: center;
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.3);
            transition: all 0.5s cubic-bezier(0.22, 0.61, 0.36, 1);
            border: 1px solid rgba(255, 255, 255, 0.08);
            cursor: pointer;
            position: relative;
            overflow: hidden;
          	 padding: 15px !important;
       		  min-height: 120px !important;
        }

        .partner-card:hover {
            transform: translateY(-15px) scale(1.05);
            border-color: rgba(255, 138, 0, 0.4);
            box-shadow: 
                0 30px 50px -10px rgba(255, 87, 104, 0.3),
                inset 0 1px 0 rgba(255, 255, 255, 0.1);
            z-index: 5;
        }

        .partner-card::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 5px;
            background: linear-gradient(90deg, #ff8a00, #ff5768);
            border-radius: 20px 20px 0 0;
            opacity: 0;
            transition: opacity 0.4s ease;
        }

        .partner-card:hover::after {
            opacity: 1;
        }

        .partner-card .icon {
            font-size: 36px;
            color: #ff8a00;
            margin-bottom: 18px;
            transition: all 0.4s ease;
        }

        .partner-card:hover .icon {
            color: #ff5768;
            transform: rotate(20deg) scale(1.3);
        }

        .partner-card .name {
            
            color: white;
            
            font-weight: 700;
          	 font-size: 18px !important;
        	  margin: 8px 0 !important;
        }

        .partner-card .count {
            
            font-weight: 800;
            background: linear-gradient(135deg, #ff8a00, #ff5768);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            line-height: 1;
            margin-bottom: 10px;
            letter-spacing: -1px;
          	 font-size: 28px !important;
        	  margin: 5px 0 !important;
        }

        .partner-card .desc {
            
            color: #bbb;
            
          	 font-size: 13px !important;
        	  line-height: 1.4 !important;
        }

        /* ====== 图片弹窗 ====== */
        .photo-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.92);
            display: none;
            align-items: center;
            justify-content: center;
            z-index: 9999;
            padding: 30px;
            backdrop-filter: blur(15px);
            animation: modalBgFade 0.4s ease forwards;
        }

        @keyframes modalBgFade {
            from { background: rgba(0, 0, 0, 0); }
            to { background: rgba(0, 0, 0, 0.92); }
        }

        .photo-modal.active {
            display: flex;
        }

        .modal-content {
            background: linear-gradient(145deg, 
                rgba(40, 42, 75, 0.98) 0%, 
                rgba(30, 32, 58, 0.98) 100%);
            border-radius: 28px;
            padding: 40px;
            max-width: 90vw;
            max-height: 95vw;
            width: auto;
            height: auto;
            text-align: center;
            border: 1px solid rgba(255, 138, 0, 0.4);
            box-shadow: 0 30px 60px rgba(0, 0, 0, 0.7);
            position: relative;
            overflow: hidden;
            animation: modalContentSlide 0.5s cubic-bezier(0.22, 0.61, 0.36, 1) forwards;
            transform: translateY(50px);
            opacity: 0;
        }

        @keyframes modalContentSlide {
            to { 
                transform: translateY(0); 
                opacity: 1; 
            }
        }

        .modal-content::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 5px;
            background: linear-gradient(90deg, #ff8a00, #ff5768, #9b51e0);
            border-radius: 28px 28px 0 0;
        }

.modal-content img {
    display: block;
    max-width: 100%;          /* 横图→宽屏 */
    max-height: 75vh;         /* 竖图→高屏 */
    height: auto;
    object-fit: contain;
    margin: 0 auto;           /* 水平居中 */
    border-radius: 18px;
}
        .modal-content h3 {
            color: #ff8a00;
            margin-bottom: 15px;
            font-size: 28px;
            font-weight: 700;
        }

        .modal-content p {
            color: #ddd;
            margin-bottom: 30px;
            font-size: 18px;
            line-height: 1.6;
        }

        .modal-close {
            padding: 15px 35px;
            background: linear-gradient(135deg, #ff5768, #ff8a00);
            color: white;
            border: none;
            border-radius: 14px;
            cursor: pointer;
            font-size: 17px;
            font-weight: 600;
            transition: all 0.3s ease;
        }

        .modal-close:hover {
            transform: translateY(-3px);
            box-shadow: 0 12px 30px rgba(255, 87, 104, 0.5);
        }


<!-- 搭档排期弹窗 -->
<div class="schedule-modal" id="schedule-modal">
  <div class="schedule-modal-content">
    <div class="modal-header">
      <h3 id="combination-title"></h3>
      <button class="modal-close-btn" id="schedule-modal-close">&times;</button>
    </div>

    <div class="combination-info">
      <div class="combination-avatars">
        <div class="avatar"></div>
        <div class="avatar"></div>
      </div>
      <div class="combination-stats">
        <div>合作次数：<span id="combination-count"></span></div>
        <div>合作剧目：<span id="combination-plays"></span></div>
      </div>
    </div>

    <div class="schedule-list-container">
      <h4>排期明细</h4>
      <div id="schedule-list"></div>
    </div>

    <div class="modal-footer">
      <button class="close-btn" id="schedule-close-btn">关闭</button>
    </div>
  </div>
</div>

        /* ====== 年度总结区 ====== */
        .summary-card {
            background: linear-gradient(145deg, 
                rgba(40, 42, 75, 0.95) 0%, 
                rgba(30, 32, 58, 0.95) 100%);
            border-radius: 24px;
            padding: 35px 30px;
            margin-top: 25px;
            border: 1px solid rgba(255, 255, 255, 0.08);
            box-shadow: 0 25px 60px rgba(0, 0, 0, 0.5);
            text-align: left;
            position: relative;
            overflow: hidden;
        }

        .summary-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 5px;
            background: linear-gradient(90deg, 
                #ff8a00, #ff5768, #9b51e0, #4169e1, #ff8a00);
            background-size: 300% 100%;
            border-radius: 24px 24px 0 0;
            animation: gradientFlow 6s linear infinite;
        }

        .summary-card .icon {
            font-size: 52px;
            color: #ff8a00;
            margin-bottom: 30px;
            text-align: center;
            filter: drop-shadow(0 6px 15px rgba(255, 138, 0, 0.3));
        }

        .summary-card p {
            font-size: 19px;
            line-height: 2;
            color: #e0e0e0;
            margin-bottom: 30px;
            position: relative;
            padding-left: 25px;
        }

        .summary-card p::before {
            content: '»';
            position: absolute;
            left: 0;
            color: #ff8a00;
            font-size: 26px;
            line-height: 1;
            font-weight: bold;
        }

        .summary-card .highlight {
            color: #ff5768;
            font-weight: 800;
            position: relative;
            padding: 0 3px;
        }

        .summary-card .highlight::after {
            content: '';
            position: absolute;
            bottom: 3px;
            left: 0;
            width: 100%;
            height: 4px;
            background: linear-gradient(90deg, 
                transparent, 
                rgba(255, 87, 104, 0.6), 
                transparent);
            border-radius: 2px;
        }

        /* ====== 响应式适配 ====== */
        @media (max-width: 1100px) {
            .report-container { max-width: 95%; }
            .header h1 { font-size: 40px; }
            .section-title { font-size: 30px; }
        }

        @media (max-width: 900px) {
            .header { padding: 60px 30px 40px; }
            .header h1 { font-size: 36px; }
            .header p { font-size: 18px; }
            .data-section, .cross-city-section, .special-section, 
            .partner-section, .summary-section { padding: 40px 30px; }
            .data-grid { grid-template-columns: repeat(2, 1fr); }
            .city-map-container { height: 480px; }
            .partner-grid { grid-template-columns: repeat(2, 1fr); }
            .chart-wrap { height: 340px; padding: 25px; }
        }

        @media (max-width: 768px) {
            .header h1 { font-size: 32px; }
            .section-title { font-size: 26px; margin-bottom: 30px; }
            .section-title i { width: 50px; height: 50px; font-size: 22px; }
            .data-card { padding: 30px 20px; }
            .data-card .num { font-size: 56px; }
            .data-card .desc { font-size: 16px; }
            .city-map-container { height: 420px; }
            .city-point { width: 40px; height: 40px; font-size: 12px; }
            .map-label { font-size: 16px; padding: 10px 16px; }
            .map-note { max-width: 300px; padding: 15px 20px; }
            .timeline { padding-left: 30px; }
            .timeline::before { left: 15px; }
            .timeline-item::before { left: -32px; width: 20px; height: 20px; }
            .timeline-item .content { padding: 22px 26px; }
            .partner-grid { grid-template-columns: 1fr; gap: 20px; }
            .summary-card { padding: 40px 35px; }
            .summary-card p { font-size: 18px; line-height: 1.9; padding-left: 20px; }
        }

        @media (max-width: 576px) {
            body { padding: 10px; }
            .header { padding: 50px 20px 35px; }
            .header h1 { font-size: 28px; }
            .header p { font-size: 16px; }
            .section-title { font-size: 24px; flex-direction: column; align-items: flex-start; }
            .section-title::after { width: 100%; margin-left: 0; margin-top: 10px; }
            .data-grid { grid-template-columns: 1fr; gap: 20px; }
            .data-section, .cross-city-section, .special-section, 
            .partner-section, .summary-section { padding: 35px 25px; }
            .city-map-container { height: 380px; }
            .city-point { width: 50px; height: 50px; font-size: 12px; }
            .map-label { font-size: 14px; padding: 8px 14px; }
            .map-note { max-width: 260px; padding: 12px 18px; font-size: 14px; bottom: 15px; left: 15px; }
            .timeline { padding-left: 25px; }
            .timeline::before { left: 12px; }
            .timeline-item::before { left: -29px; }
            .timeline-item .content { padding: 20px 24px; }
            .timeline-item .content .label { float: none; display: block; margin: 15px 0 0 0; width: fit-content; }
            .summary-card { padding: 35px 30px; }
            .summary-card p { font-size: 17px; line-height: 1.8; padding-left: 18px; }
            .search-box { flex-direction: column; }
            .search-box input, .search-box button { width: 100%; }
            .performance-table { font-size: 14px; }
            .performance-table th, .performance-table td { padding: 12px 8px; }
        }

        @media (max-width: 400px) {
            .header h1 { font-size: 26px; }
            .section-title { font-size: 22px; }
            .data-card .num { font-size: 48px; }
            .city-map-container { height: 350px; }
            .chart-wrap { height: 300px; padding: 20px; }
        }

/* ====== 年度合作搭档 ====== */
.partner-combination-section{ background:rgba(30,31,56,.6); padding:50px 40px; }
.combination-grid{ display:grid; grid-template-columns:repeat(auto-fit,minmax(280px,1fr)); gap:25px; margin-top:25px; }
.combination-card{ background:linear-gradient(145deg,rgba(40,42,75,.95),rgba(30,32,58,.95)); border-radius:18px; padding:25px; text-align:center; border:1px solid rgba(255,138,0,.3); cursor:pointer; transition:all .4s ease; position:relative; overflow:hidden; }
.combination-card:hover{ transform:translateY(-10px) scale(1.02); box-shadow:0 20px 40px rgba(255,87,104,.2); border-color:rgba(255,138,0,.6); }
.combination-rank{ position:absolute; top:15px; right:15px; background:linear-gradient(135deg,#ff8a00,#ff5768); color:#fff; width:36px; height:36px; border-radius:50%; display:flex; align-items:center; justify-content:center; font-weight:800; font-size:16px; box-shadow:0 4px 15px rgba(255,87,104,.3); }
.combination-partners{ display:flex; justify-content:center; align-items:center; gap:15px; margin-bottom:20px; }
.partner-avatar{ width:60px; height:60px; border-radius:50%; display:flex; align-items:center; justify-content:center; color:#fff; font-size:22px; font-weight:700; box-shadow:0 8px 25px rgba(0,0,0,.3); }
.combination-names h3{ color:#fff; font-size:20px; margin-bottom:5px; }
.combo-count{ color:#ff8a00; font-size:28px; font-weight:800; margin:10px 0; }

/* ====== 搭档排期弹窗（视口居中） ====== */
.schedule-modal{ position:fixed; inset:0; background:rgba(0,0,0,.92); display:none; align-items:center; justify-content:center; z-index:9999; padding:30px; backdrop-filter:blur(15px); }
.schedule-modal.active{ display:flex; }
.schedule-modal-content{ background:linear-gradient(145deg,rgba(40,42,75,.98),rgba(30,32,58,.98)); border-radius:28px; padding:40px; max-width:800px; width:100%; border:1px solid rgba(255,138,0,.4); box-shadow:0 30px 60px rgba(0,0,0,.7); position:relative; overflow:hidden; animation:modalContentSlide .5s cubic-bezier(.22,.61,.36,1) forwards; }
.modal-header{ display:flex; justify-content:space-between; align-items:center; margin-bottom:25px; }
.modal-header h3{ color:#ff8a00; font-size:26px; font-weight:700; }
.modal-close-btn{ background:none; border:none; color:#aaa; font-size:24px; cursor:pointer; transition:color .3s ease; }
.modal-close-btn:hover{ color:#ff8a00; }
.combination-info{ display:flex; align-items:center; gap:20px; margin-bottom:30px; }
.combination-avatars{ display:flex; gap:15px; }
.combination-avatars .avatar{ width:70px; height:70px; border-radius:50%; display:flex; align-items:center; justify-content:center; color:#fff; font-size:28px; font-weight:700; }
.combination-stats{ color:#fff; font-size:20px; }
.combination-stats span{ color:#ff8a00; font-weight:700; }
.schedule-list-container{ max-height:400px; overflow-y:auto; padding-right:10px; }
.schedule-list-container h4{ color:#ff8a00; font-size:18px; margin-bottom:15px; padding-bottom:10px; border-bottom:2px solid rgba(255,138,0,.3); }
#schedule-list{ display:flex; flex-direction:column; gap:12px; }
.schedule-item{ background:rgba(30,31,56,.8); border-left:4px solid #ff8a00; border-radius:12px; padding:15px 20px; transition:all .3s ease; }
.schedule-item:hover{ background:rgba(40,42,75,.9); transform:translateX(5px); }
.schedule-item-header{ display:flex; justify-content:space-between; align-items:center; margin-bottom:8px; }
.schedule-date{ color:#ff8a00; font-weight:600; font-size:16px; }
.schedule-time{ color:#ffc107; font-size:14px; }
.schedule-details{ display:flex; justify-content:space-between; color:#ddd; font-size:14px; }
.schedule-play{ color:#fff; font-weight:500; }
.schedule-city{ color:#aaa; }
.modal-footer{ margin-top:30px; padding-top:20px; border-top:1px solid rgba(255,255,255,.1); text-align:center; }
.close-btn{ padding:12px 35px; background:linear-gradient(135deg,#ff5768,#ff8a00); color:#fff; border:none; border-radius:12px; cursor:pointer; font-size:16px; font-weight:600; transition:all .3s ease; }
.close-btn:hover{ transform:translateY(-3px); box-shadow:0 10px 25px rgba(255,87,104,.4); }
.no-icon {
  padding-left: 0 !important;          /* 去掉左侧留空 */
}
.no-icon::before {
  display: none !important;            /* 强制去掉 » 图标 */
}

/* 弹窗内容区域超出就滚 */
.schedule-modal-content,
.modal-content {
    max-height: 90vh;          /* 最大高＝视口90% */
    overflow-y: auto;          /* 纵向滚动条 */
    -webkit-overflow-scrolling: touch; /* iOS 顺滑 */
}

    </style>
</head>
<body>
    <!-- 星光背景容器 -->
    <div id="starfield"></div>

    <!-- 报告主容器 -->
    <div class="report-container">
        <!-- 标题区 -->
        <div class="header">
            <div class="header-content">
                <div class="icon"><i class="fa-solid fa-masks-theater"></i></div>
                <h1>曾鑫 · 2025音乐剧演出年度报告</h1>
                <p>146场演出 · 7部剧目 · 4城奔赴 · 无限热爱</p>
            </div>
        </div>

        <!-- 核心数据区 -->
        <div class="data-section">
            <h2 class="section-title"><i class="fa-solid fa-chart-pie"></i>年度演出数据</h2>
              <p style="color:#aaa; margin-top:-15px; margin-bottom:25px; font-size:17px;">
    可点击卡片解锁排期
  </p>
<div class="data-grid">
                <div class="data-card" id="total-performances">
                    <div class="icon"><i class="fa-solid fa-file-invoice"></i></div>
                    <div class="num">146</div>
                    <div class="desc">全年演出总场次</div>
                </div>
                <div class="data-card" id="total-plays">
                    <div class="icon"><i class="fa-solid fa-masks-theater"></i></div>
                    <div class="num">7</div>
                    <div class="desc">参演剧目数量</div>
                </div>
                <div class="data-card" id="total-cities">
                    <div class="icon"><i class="fa-solid fa-city"></i></div>
                    <div class="num">4</div>
                    <div class="desc">演出覆盖城市</div>
                </div>
                <div class="data-card" id="total-journeys">
                    <div class="icon"><i class="fa-solid fa-plane-departure"></i></div>
                    <div class="num">24</div>
                    <div class="desc">跨城连打次数</div>
                </div>
            </div>

            <!-- 全部演出数据面板 -->
            <div class="interactive-panel" id="performances-panel">
                <h3 style="color: #ff8a00; margin-bottom: 15px; font-size: 24px;">
                    <i class="fa-solid fa-list"></i> 2025全年演出明细
                </h3>
                
                <!-- 搜索结果信息 -->
                <div class="search-result-info" id="search-result-info">
                    共 <span id="total-count">146</span> 场演出
                </div>
                
                <!-- 搜索框 -->
                <div class="search-box">
                    <input type="text" id="search-input" placeholder="输入剧目、城市、搭档进行搜索...">
                    <button id="search-btn">
                        <i class="fa-solid fa-magnifying-glass"></i> 搜索
                    </button>
                    <button id="reset-btn">
                        <i class="fa-solid fa-rotate-left"></i> 重置
                    </button>
                </div>
                
                <!-- 演出表格 -->
                <table class="performance-table">
                    <thead>
                        <tr>
                            <th>场次</th>
                            <th>日期</th>
                            <th>时间</th>
                            <th>城市</th>
                            <th>剧目</th>
                            <th>搭档</th>
                        </tr>
                    </thead>
                    <tbody id="performances-body">
                        <!-- 数据通过JavaScript动态加载 -->
                    </tbody>
                </table>
                
                <!-- 分页控件 -->
                <div class="pagination">
                    <button id="prev-page">
                        <i class="fa-solid fa-chevron-left"></i> 上一页
                    </button>
                    <div id="page-numbers"></div>
                    <div class="page-info" id="page-info">第1页 / 共15页</div>
                    <button id="next-page">
                        下一页 <i class="fa-solid fa-chevron-right"></i>
                    </button>
                </div>
            </div>

            <!-- 剧目列表面板 -->
            <div class="interactive-panel" id="plays-panel">
                <h3 style="color: #ff8a00; margin-bottom: 25px; font-size: 24px;">
                    <i class="fa-solid fa-masks-theater"></i> 参演剧目列表
                </h3>
                <div class="item-list" style="display: grid; grid-template-columns: repeat(auto-fill, minmax(280px, 1fr)); gap: 25px;">
                    <div class="item-card" data-play="阿波罗尼亚" style="background: rgba(255,138,0,0.12); padding: 25px; border-radius: 18px; border: 2px solid rgba(255,138,0,0.3); cursor: pointer; transition: all 0.3s ease;">
                        <h4 style="color: #ff8a00; margin-bottom: 12px; font-size: 20px; font-weight: 700;">阿波罗尼亚</h4>
                        <p style="color: #ccc; font-size: 15px; line-height: 1.5;">演出场次：<strong style="color:#ff8a00;">83场</strong><br>饰演角色：<strong>Oscar</strong><br>演出城市：广州、上海</p>
                    </div>
                    <div class="item-card" data-play="火焰" style="background: rgba(255,87,104,0.12); padding: 25px; border-radius: 18px; border: 2px solid rgba(255,87,104,0.3); cursor: pointer; transition: all 0.3s ease;">
                        <h4 style="color: #ff5768; margin-bottom: 12px; font-size: 20px; font-weight: 700;">火焰</h4>
                        <p style="color: #ccc; font-size: 15px; line-height: 1.5;">演出场次：<strong style="color:#ff5768;">22场</strong><br>饰演角色：<strong>Eric</strong><br>演出城市：武汉 | 毕业：10.12</p>
                    </div>
                    <div class="item-card" data-play="新刘海砍樵" style="background: rgba(155,81,224,0.12); padding: 25px; border-radius: 18px; border: 2px solid rgba(155,81,224,0.3); cursor: pointer; transition: all 0.3s ease;">
                        <h4 style="color: #9b51e0; margin-bottom: 12px; font-size: 20px; font-weight: 700;">新刘海砍樵</h4>
                        <p style="color: #ccc; font-size: 15px; line-height: 1.5;">演出场次：<strong style="color:#9b51e0;">19场</strong><br>饰演角色：<strong>白头翁</strong><br>演出城市：长沙</p>
                    </div>
                    <div class="item-card" data-play="怪物" style="background: rgba(0,200,150,0.12); padding: 25px; border-radius: 18px; border: 2px solid rgba(0,200,150,0.3); cursor: pointer; transition: all 0.3s ease;">
                        <h4 style="color: #00c896; margin-bottom: 12px; font-size: 20px; font-weight: 700;">怪物</h4>
                        <p style="color: #ccc; font-size: 15px; line-height: 1.5;">演出场次：<strong style="color:#00c896;">9场</strong><br>饰演角色：<strong>Leo</strong><br>演出城市：武汉 | 首演：08.02</p>
                    </div>
                    <div class="item-card" data-play="末日迷途" style="background: rgba(65,105,225,0.12); padding: 25px; border-radius: 18px; border: 2px solid rgba(65,105,225,0.3); cursor: pointer; transition: all 0.3s ease;">
                        <h4 style="color: #4169e1; margin-bottom: 12px; font-size: 20px; font-weight: 700;">末日迷途</h4>
                        <p style="color: #ccc; font-size: 15px; line-height: 1.5;">演出场次：<strong style="color:#4169e1;">6场</strong><br>饰演角色：<strong>威廉</strong><br>演出城市：上海 | 首演：09.12</p>
                    </div>
                    
                    <div class="item-card" data-play="嗜血博士" style="background: rgba(158,158,158,0.12); padding: 25px; border-radius: 18px; border: 2px solid rgba(158,158,158,0.3); cursor: pointer; transition: all 0.3s ease;">
                        <h4 style="color: #9e9e9e; margin-bottom: 12px; font-size: 20px; font-weight: 700;">嗜血博士</h4>
                        <p style="color: #ccc; font-size: 15px; line-height: 1.5;">演出场次：<strong style="color:#9e9e9e;">2场</strong><br>饰演角色：<strong>乔纳森</strong><br>演出城市：武汉 | 首演：10.07</p>
                    </div>
<div class="item-card" data-play="你好，我找Smith" style="background: rgba(255,193,7,0.12); padding: 25px; border-radius: 18px; border: 2px solid rgba(255,193,7,0.3); cursor: pointer; transition: all 0.3s ease;">
                        <h4 style="color: #ffc107; margin-bottom: 12px; font-size: 20px; font-weight: 700;">你好，我找Smith</h4>
                        <p style="color: #ccc; font-size: 15px; line-height: 1.5;">演出场次：<strong style="color:#ffc107;">5场</strong><br>饰演角色：<strong>Bobby</strong><br>演出城市：广州 | 回归：11.07</p>
                    </div>
                </div>
            </div>

            <!-- 城市列表面板 -->
            <div class="interactive-panel" id="cities-panel">
                <h3 style="color: #ff8a00; margin-bottom: 25px; font-size: 24px;">
                    <i class="fa-solid fa-city"></i> 演出城市列表
                </h3>
                <div class="item-list" style="display: grid; grid-template-columns: repeat(auto-fill, minmax(280px, 1fr)); gap: 25px;">
                    <div class="item-card" data-city="广州" style="background: rgba(255,138,0,0.12); padding: 25px; border-radius: 18px; border: 2px solid rgba(255,138,0,0.3); cursor: pointer; transition: all 0.3s ease;">
                        <h4 style="color: #ff8a00; margin-bottom: 12px; font-size: 20px; font-weight: 700;">广州</h4>
                        <p style="color: #ccc; font-size: 15px; line-height: 1.5;">演出场次：<strong style="color:#ff8a00;">87场</strong><br>占总场次：<strong>59.6%</strong><br>演出剧目：阿波罗尼亚、你好，我找Smith</p>
                    </div>
                    <div class="item-card" data-city="武汉" style="background: rgba(255,87,104,0.12); padding: 25px; border-radius: 18px; border: 2px solid rgba(255,87,104,0.3); cursor: pointer; transition: all 0.3s ease;">
                        <h4 style="color: #ff5768; margin-bottom: 12px; font-size: 20px; font-weight: 700;">武汉</h4>
                        <p style="color: #ccc; font-size: 15px; line-height: 1.5;">演出场次：<strong style="color:#ff5768;">32场</strong><br>占总场次：<strong>21.9%</strong><br>演出剧目：火焰、怪物、嗜血博士</p>
                    </div>
                    <div class="item-card" data-city="长沙" style="background: rgba(155,81,224,0.12); padding: 25px; border-radius: 18px; border: 2px solid rgba(155,81,224,0.3); cursor: pointer; transition: all 0.3s ease;">
                        <h4 style="color: #9b51e0; margin-bottom: 12px; font-size: 20px; font-weight: 700;">长沙</h4>
                        <p style="color: #ccc; font-size: 15px; line-height: 1.5;">演出场次：<strong style="color:#9b51e0;">19场</strong><br>占总场次：<strong>13.0%</strong><br>演出剧目：新刘海砍樵</p>
                    </div>
                    <div class="item-card" data-city="上海" style="background: rgba(65,105,225,0.12); padding: 25px; border-radius: 18px; border: 2px solid rgba(65,105,225,0.3); cursor: pointer; transition: all 0.3s ease;">
                        <h4 style="color: #4169e1; margin-bottom: 12px; font-size: 20px; font-weight: 700;">上海</h4>
                        <p style="color: #ccc; font-size: 15px; line-height: 1.5;">演出场次：<strong style="color:#4169e1;">8场</strong><br>占总场次：<strong>5.5%</strong><br>演出剧目：末日迷途、阿波罗尼亚</p>
                    </div>
                </div>
            </div>
                      <!-- 剧目场次分布图表 -->
            <h3 class="section-title" style="font-size: 24px; margin-top: 60px;">
                <i class="fa-solid fa-list-music"></i> 剧目演出场次分布
            </h3>
            <div class="chart-wrap">
                <canvas id="playChart"></canvas>
            </div>

            <!-- 城市演出分布图表 -->
            <h3 class="section-title" style="font-size: 24px; margin-top: 60px;">
                <i class="fa-solid fa-map-location-dot"></i> 演出城市分布
            </h3>
            <div class="chart-wrap">
                <canvas id="cityChart"></canvas>
            </div>
        </div> <!-- 结束 .data-section -->

        <!-- 跨城连打地图区 -->
        <div class="cross-city-section">
            <h2 class="section-title"><i class="fa-solid fa-plane"></i> 跨城连打轨迹图</h2>
            <p style="color: #aaa; margin-top: -15px; margin-bottom: 25px; font-size: 17px;">
                每一次连线，都是一次为热爱的奔赴
            </p>
<p margin-top: -10px; margin-bottom: 25px; font-size: 18px;">
<span style="color:#ff8a00;">广州 ↔ 武汉：8次</span>&nbsp;&nbsp;&nbsp;
<span style="color:#ff5768;">广州 ↔ 长沙：8次</span>&nbsp;&nbsp;&nbsp;
<span style="color:#9b51e0;">武汉 ↔ 长沙：4次</span>&nbsp;&nbsp;&nbsp;
<span style="color:#4169e1;">武汉 ↔ 上海：2次</span>&nbsp;&nbsp;&nbsp;
<span style="color:#00c896;">长沙 ↔ 上海：2次</span>
            </p>

</span>   

            <div class="city-map-container">
                <div class="map-bg"></div>
                <div class="city-lines-container" id="cityLinesContainer"></div>
                
                <div class="city-point guangzhou" data-city="广州">
    <div class="point-content">
        <div class="city-name">广州</div>
        
    </div>
</div>
<div class="city-point wuhan" data-city="武汉">
    <div class="point-content">
        <div class="city-name">武汉</div>
    </div>
</div>
<div class="city-point changsha" data-city="长沙">
    <div class="point-content">
        <div class="city-name">长沙</div>
    </div>
</div>
<div class="city-point shanghai" data-city="上海">
    <div class="point-content">
        <div class="city-name">上海</div>
    </div>
</div>
                
            </div>
        </div>

        <!-- 特殊场次时间轴 -->
        <div class="special-section">
            <h2 class="section-title"><i class="fa-solid fa-calendar-days"></i>年度纪念场次</h2>
            <div class="timeline">
                <!-- 每个 timeline-item 都添加了 data-photo 属性用于弹窗图片 -->
                <div class="timeline-item" data-photo="https://cdn.jsdelivr.net/gh/LinMiaolong/Zengxin_photos@main/0101.jpg">
                    <div class="date"><i class="fa-solid fa-calendar"></i> 2025.01.01</div>
                    <div class="content">
                        广州《阿波罗尼亚》- 元旦场 <span class="label">2025年起点</span>
                    </div>
                </div>
                <div class="timeline-item" data-photo="https://cdn.jsdelivr.net/gh/LinMiaolong/Zengxin_photos@main/0119.jpg">
                    <div class="date"><i class="fa-solid fa-calendar"></i> 2025.01.19</div>
                    <div class="content">
                        武汉《火焰》- 龙年收官场 <span class="label">龙年收官</span>
                    </div>
                </div>
                <div class="timeline-item" data-photo="https://cdn.jsdelivr.net/gh/LinMiaolong/Zengxin_photos@main/0212.jpg">
                    <div class="date"><i class="fa-solid fa-calendar"></i> 2025.02.12</div>
                    <div class="content">
                        长沙《新刘海砍樵》- 蛇年开工场 <span class="label">蛇年开工</span>
                    </div>
                </div>
                <div class="timeline-item" data-photo="https://cdn.jsdelivr.net/gh/LinMiaolong/Zengxin_photos@main/0503.jpg">
                    <div class="date"><i class="fa-solid fa-calendar"></i> 2025.05.03</div>
                    <div class="content">
                        武汉《火焰》- 火焰生日场 <span class="label">生日限定</span>
                    </div>
                </div>
                <div class="timeline-item" data-photo="https://cdn.jsdelivr.net/gh/LinMiaolong/Zengxin_photos@main/0517.jpg">
                    <div class="date"><i class="fa-solid fa-calendar"></i> 2025.05.17</div>
                    <div class="content">
                        广州《阿波罗尼亚》- mia生日场 <span class="label">生日限定</span>
                    </div>
                </div>
<div class="timeline-item" data-photo="https://cdn.jsdelivr.net/gh/LinMiaolong/Zengxin_photos@main/0720.jpg">
  <div class="date"><i class="fa-solid fa-calendar"></i> 2025.07.20</div>
  <div class="content">
    上海《阿波罗尼亚》- 上海首演场 <span class="label">城市解锁</span>
  </div>
</div>
                <div class="timeline-item" data-photo="https://cdn.jsdelivr.net/gh/LinMiaolong/Zengxin_photos@main/0802.jpg">
                    <div class="date"><i class="fa-solid fa-calendar"></i> 2025.08.02</div>
                    <div class="content">
                        武汉《怪物》- 剧目首演场 <span class="label">新剧解锁</span>
                    </div>
                </div>
                <div class="timeline-item" data-photo="https://cdn.jsdelivr.net/gh/LinMiaolong/Zengxin_photos@main/0912.jpg">
                    <div class="date"><i class="fa-solid fa-calendar"></i> 2025.09.12</div>
                    <div class="content">
                        上海《末日迷途》- 剧目首演场 <span class="label">新剧解锁</span>
                    </div>
                </div>
<div class="timeline-item" data-photo="https://cdn.jsdelivr.net/gh/LinMiaolong/Zengxin_photos@main/0920.jpg">
  <div class="date"><i class="fa-solid fa-calendar"></i> 2025.09.20</div>
  <div class="content">
    广州《阿波罗尼亚》- 商演500场 <span class="label">里程碑</span>
  </div>
</div>
<div class="timeline-item" data-photo="https://cdn.jsdelivr.net/gh/LinMiaolong/Zengxin_photos@main/1003.jpg">
  <div class="date"><i class="fa-solid fa-calendar"></i> 2025.10.03</div>
  <div class="content">
    广州《阿波罗尼亚》- Oscar四周年场 <span class="label">周年限定</span>
  </div>
</div>

                <div class="timeline-item" data-photo="https://cdn.jsdelivr.net/gh/LinMiaolong/Zengxin_photos@main/1007.jpg">
                    <div class="date"><i class="fa-solid fa-calendar"></i> 2025.10.07</div>
                    <div class="content">
                        武汉《嗜血博士》- 剧目首演场 <span class="label">新剧解锁</span>
                    </div>
                </div>

                <div class="timeline-item" data-photo="https://cdn.jsdelivr.net/gh/LinMiaolong/Zengxin_photos@main/1012.jpg">
                    <div class="date"><i class="fa-solid fa-calendar"></i> 2025.10.12</div>
                    <div class="content">
                        武汉《火焰》- 剧目毕业场 <span class="label">圆满收官</span>
                    </div>
                </div>
                <div class="timeline-item" data-photo="https://cdn.jsdelivr.net/gh/LinMiaolong/Zengxin_photos@main/1107.jpg">
                    <div class="date"><i class="fa-solid fa-calendar"></i> 2025.11.07</div>
                    <div class="content">
                        广州《你好，我找Smith》- 剧目回归场 <span class="label">广州回归</span>
                    </div>
                </div>
                <div class="timeline-item" data-photo="https://cdn.jsdelivr.net/gh/LinMiaolong/Zengxin_photos@main/1231.jpg">
                    <div class="date"><i class="fa-solid fa-calendar"></i> 2025.12.31</div>
                    <div class="content">
                        广州《阿波罗尼亚》- 跨年场 <span class="label">2025年收官</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- 年度合作演员区 -->
<div class="partner-section">
    <h2 class="section-title"><i class="fa-solid fa-handshake"></i> 年度合作演员</h2>
<div class="partner-grid">
  <p style="color:#aaa; margin-top:-15px; margin-bottom:25px; font-size:17px;">
    2025年合作次数最多的好同事们
  </p>
  <p style="color:#aaa; margin-top:-15px; margin-bottom:25px; font-size:17px;">
    “兄弟抱一下”
  </p>
        <!-- 每个 partner-card 都添加了 data-photo 属性用于弹窗图片 -->
        <div class="partner-card" data-actor="dumu" data-photo=https://cdn.jsdelivr.net/gh/LinMiaolong/Zengxin_photos@main/dumu.jpg
>
            <div class="name">杜牧</div>
            <div class="count">28场</div>
            <div class="desc">阿波罗尼亚</div>
        </div>
        <div class="partner-card" data-actor="likunjia" data-photo=https://cdn.jsdelivr.net/gh/LinMiaolong/Zengxin_photos@main/likunjia.jpg
>
            <div class="name">李坤嘉</div>
            <div class="count">27场</div>
            <div class="desc">阿波罗尼亚</div>
        </div>
        <div class="partner-card" data-actor="wuguanchen" data-photo=https://cdn.jsdelivr.net/gh/LinMiaolong/Zengxin_photos@main/wuguanchen.jpg
>
            <div class="name">武冠辰</div>
            <div class="count">17场</div>
            <div class="desc">阿波罗尼亚</div>
        </div>
        <div class="partner-card" data-actor="zhengjinkai" data-photo=https://cdn.jsdelivr.net/gh/LinMiaolong/Zengxin_photos@main/zhengjinkai.jpg
>
            <div class="name">郑金铠</div>
            <div class="count">17场</div>
            <div class="desc">阿波罗尼亚</div>
        </div>
        <div class="partner-card" data-actor="zhangliang" data-photo=https://cdn.jsdelivr.net/gh/LinMiaolong/Zengxin_photos@main/zhangliang.jpg
>
            <div class="name">张梁</div>
            <div class="count">12场</div>
            <div class="desc">阿波罗尼亚</div>
        </div>
        <div class="partner-card" data-actor="bawenhao" data-photo=https://cdn.jsdelivr.net/gh/LinMiaolong/Zengxin_photos@main/bawenhao.jpg
>
            <div class="name">巴文豪</div>
            <div class="count">11场</div>
            <div class="desc">阿波罗尼亚</div>
        </div>
        <div class="partner-card" data-actor="yangyuwei" data-photo=https://cdn.jsdelivr.net/gh/LinMiaolong/Zengxin_photos@main/yangyuwei.jpg
>
            <div class="name">杨宇威</div>
            <div class="count">10场</div>
            <div class="desc">阿波罗尼亚</div>
        </div>
        <div class="partner-card" data-actor="wangborui" data-photo=https://cdn.jsdelivr.net/gh/LinMiaolong/Zengxin_photos@main/wangborui.jpg
>
            <div class="name">王博睿</div>
            <div class="count">10场</div>
            <div class="desc">阿波罗尼亚</div>
        </div>
        <div class="partner-card" data-actor="dengxinrui" data-photo=https://cdn.jsdelivr.net/gh/LinMiaolong/Zengxin_photos@main/dengxinrui.jpg
>
            <div class="name">邓欣锐</div>
            <div class="count">9场</div>
            <div class="desc">阿波罗尼亚</div>
        </div>
        <div class="partner-card" data-actor="zhengwanxia" data-photo=https://cdn.jsdelivr.net/gh/LinMiaolong/Zengxin_photos@main/zhengwanxia.jpg
>
            <div class="name">郑婉霞</div>
            <div class="count">9场</div>
            <div class="desc">火焰&嗜血博士</div>
        </div>
    </div>
</div>

<!-- 年度合作组合 -->
<div class="partner-combination-section">
  <h2 class="section-title">
    <i class="fa-solid fa-user-group"></i> 年度合作组合
  </h2>
  <p style="color:#aaa; margin-top:-15px; margin-bottom:25px; font-size:17px;">
    2025年合作次数最多的组合
  </p>
  <p style="color:#aaa; margin-top:-15px; margin-bottom:25px; font-size:17px;">
    “一台好戏/联创/涵金我要看这个！”
  </p>

  <div class="combination-grid">

    <!--  武冠辰 & 李坤嘉 6 场 -->
    <div class="combination-card" data-combo="武冠辰_李坤嘉">
      <div class="combination-rank">1</div>
      <div class="combination-partners">
      </div>
      <div class="combination-names">
        <h3>武冠辰 & 李坤嘉</h3>
        <div class="combo-count">6 次</div>
        <p>合作剧目：阿波罗尼亚</p>
      </div>
    </div>

    <!--  武冠辰 & 巴文豪 6 场 -->
    <div class="combination-card" data-combo="武冠辰_巴文豪">
      <div class="combination-rank">1</div>
      <div class="combination-partners">
      </div>
      <div class="combination-names">
        <h3>武冠辰 & 巴文豪</h3>
        <div class="combo-count">6 次</div>
        <p>合作剧目：阿波罗尼亚</p>
      </div>
    </div>
    <!--  张梁 & 杜牧 6 场 -->
    <div class="combination-card" data-combo="张梁_杜牧">
      <div class="combination-rank">1</div>
      <div class="combination-partners">
      </div>
      <div class="combination-names">
        <h3>张梁 & 杜牧</h3>
        <div class="combo-count">6 次</div>
        <p>合作剧目：阿波罗尼亚</p>
      </div>
    </div>


    <!--  王博睿 & 李坤嘉 5 场 -->
    <div class="combination-card" data-combo="王博睿_李坤嘉">
      <div class="combination-rank">4</div>
      <div class="combination-partners">
      </div>
      <div class="combination-names">
        <h3>王博睿 & 李坤嘉</h3>
        <div class="combo-count">5 次</div>
        <p>合作剧目：阿波罗尼亚</p>
      </div>
    </div>

    <!--  郑金铠 & 李坤嘉 5 场 -->
    <div class="combination-card" data-combo="郑金铠_李坤嘉">
      <div class="combination-rank">4</div>
      <div class="combination-partners">
      </div>
      <div class="combination-names">
        <h3>郑金铠 & 李坤嘉</h3>
        <div class="combo-count">5 次</div>
        <p>合作剧目：阿波罗尼亚</p>
      </div>
</div>

    <!--  杨宇威 & 杜牧 5 场 -->
    <div class="combination-card" data-combo="杨宇威_杜牧">
      <div class="combination-rank">4</div>
      <div class="combination-partners">
      </div>
      <div class="combination-names">
        <h3>杨宇威 & 杜牧</h3>
        <div class="combo-count">5 次</div>
        <p>合作剧目：阿波罗尼亚</p>
      </div>
    </div>

  </div>
</div>

        <!-- 年度总结区 -->
        <div class="summary-section">
            <h2 class="section-title"><i class="fa-solid fa-award"></i> 年度总结</h2>
            <div class="summary-card">
                <div class="icon"><i class="fa-solid fa-star"></i></div>
                <p>在这一年里，你一共在剧场里为观众带来了<span class="highlight">146场</span>演出，<span class="highlight">7部</span>剧目的演绎看到了更多可能性，<span class="highlight">3部</span>新剧的首演冲出广州，<span class="highlight">1部</span>剧目的收官不禁让人大喊“魂兮归来”。</p>
                <p>在这一年里，24次跨城连打、14次跨城晚午连打，你获称<span class="highlight">“脆皮跨城铁人”</span>，演出足迹来到了广州、武汉、长沙，解锁了上海新坐标，你也很为自己感到骄傲吧。</p>
                <p>在这一年里，你出演的第一部剧目是元旦场的《阿波罗尼亚》，最后一部剧目是跨年场的《阿波罗尼亚》，共计出演<span class="highlight">83场</span>《阿波罗尼亚》、<span class="highlight">19场</span>《新刘海砍樵》、<span class="highlight">5场</span>《你好，我找Smith》，请你自觉认领<span class="highlight">“一台好戏的天选打工人”</span>荣誉称号。</p>
                <p>在这一年里，你把披萨抛落在地，你蜷缩在地上喊“毁了你的人是她，不是我”，你迎接卡点到场的领导，你喂弟弟喝过期牛奶还把裤子刮破，你为了耍帅把机关枪带子甩在了脸上。</p>
                <p>在这一年里，你最常说的话是<span class="highlight">“谢谢你来看我的演出”</span>，笨拙的真诚打动了无数人。<br><br></p>
<p class="no-icon" style="text-align:center; margin:20px 0;">双方的“何其有幸”终将让彼此的短暂交叠产生无限回忆</p>
<p class="no-icon" style="text-align:center; margin:20px 0;">心怀热爱的人终会拥有浩瀚“鑫”空</p>
<p class="no-icon" style="text-align:center; margin:20px 0;">愿戏剧之神保佑<br><br><br></p>
<p class="no-icon" style="text-align:center; margin:20px 0;"> ⭐⭐⭐END⭐⭐⭐<br></p>
<p class="no-icon" style="text-align:center; margin:10px 0;font-size:13px
">制作：则灵</p>
<p class="no-icon" style="text-align:center; margin:10px 0; font-size:13px
">供图：曾大鑫、章鱼、则灵</p>

            </div>

        </div>
    </div> <!-- 结束 .report-container -->

    <!-- 图片弹窗 -->
    <div class="photo-modal" id="photo-modal">
        <div class="modal-content">
            <img src="" alt="" id="modal-photo">
            <h3 id="modal-title"></h3>
            <p id="modal-desc"></p>
            <button class="modal-close" id="modal-close">关闭</button>
        </div>
    </div>

    <script>
        // ==================== 初始化函数 ====================
        document.addEventListener('DOMContentLoaded', function() {
            initStarfield();
            initData();
            initCharts();
            initCityMap();
            initInteractions();
            initPanels();
            initPhotoModals();
            renderPerformancesTable();
            initCombinationModal();
        });

        // ==================== 1. 星光背景效果 ====================
        function initStarfield() {
            const starfield = document.getElementById('starfield');
            if (!starfield) return;
            
            for (let i = 0; i < 548; i++) {
                const star = document.createElement('div');
                star.style.position = 'fixed';
                star.style.width = Math.random() * 3 + 1 + 'px';
                star.style.height = star.style.width;
                star.style.left = Math.random() * 100 + '%';
                star.style.top = Math.random() * 100 + '%';
                star.style.backgroundColor = '#fff';
                star.style.borderRadius = '50%';
                star.style.opacity = '0.3';
                star.style.animation = `twinkle ${Math.random() * 5 + 3}s ease-in-out infinite ${Math.random() * 5}s`;
                star.style.zIndex = '0';
                star.style.pointerEvents = 'none';
                starfield.appendChild(star);
            }
            
            const style = document.createElement('style');
            style.textContent = `
                @keyframes twinkle {
                    0%, 100% { opacity: 0.2; }
                    50% { opacity: 0.8; }
                }
            `;
            document.head.appendChild(style);
        }

        // ==================== 2. 完整准确的146条演出数据 ====================
        function initData() {
            // 完整的146场演出数据
            window.allPerformances = [
                // 为控制篇幅，这里列出关键场次，实际代码应包含全部146条
                {id: 1, date: '2025.01.01', time: '14:30', city: '广州', play: '阿波罗尼亚', role: 'Oscar', partner: '王博睿、杜牧'},
            {id: 2, date: '2025.01.03', time: '19:30', city: '武汉', play: '火焰', role: 'Eric', partner: '郑婉霞、罗明晖'},
            {id: 3, date: '2025.01.04', time: '19:30', city: '武汉', play: '火焰', role: 'Eric', partner: '徐郑凯伊、罗明晖'},
            {id: 4, date: '2025.01.05', time: '14:30', city: '广州', play: '阿波罗尼亚', role: 'Oscar', partner: '杨宇威、杜牧'},
            {id: 5, date: '2025.01.10', time: '19:30', city: '广州', play: '阿波罗尼亚', role: 'Oscar', partner: '杨宇威、李坤嘉'},
            {id: 6, date: '2025.01.11', time: '19:30', city: '广州', play: '阿波罗尼亚', role: 'Oscar', partner: '王博睿、邓欣锐'},
            {id: 7, date: '2025.01.12', time: '14:30', city: '广州', play: '阿波罗尼亚', role: 'Oscar', partner: '王博睿、邓欣锐'},
            {id: 8, date: '2025.01.17', time: '19:30', city: '武汉', play: '火焰', role: 'Eric', partner: '唐瑾、刘秫呈'},
            {id: 9, date: '2025.01.18', time: '15:00', city: '武汉', play: '火焰', role: 'Eric', partner: '唐瑾、罗明晖'},
            {id: 10, date: '2025.01.18', time: '19:30', city: '武汉', play: '火焰', role: 'Eric', partner: '郑婉霞、罗明晖'},
            {id: 11, date: '2025.01.19', time: '15:00', city: '武汉', play: '火焰', role: 'Eric', partner: '唐瑾、刘秫呈'},
            {id: 12, date: '2025.02.12', time: '19:30', city: '长沙', play: '新刘海砍樵', role: '白头翁', partner: ''},
            {id: 13, date: '2025.02.14', time: '19:30', city: '广州', play: '阿波罗尼亚', role: 'Oscar', partner: '李苏霖、李坤嘉'},
            {id: 14, date: '2025.02.15', time: '19:30', city: '广州', play: '阿波罗尼亚', role: 'Oscar', partner: '李苏霖、李坤嘉'},
            {id: 15, date: '2025.02.16', time: '14:30', city: '广州', play: '阿波罗尼亚', role: 'Oscar', partner: '杨宇威、李坤嘉'},
            {id: 16, date: '2025.02.20', time: '19:30', city: '长沙', play: '新刘海砍樵', role: '白头翁', partner: ''},
            {id: 17, date: '2025.02.21', time: '19:30', city: '广州', play: '阿波罗尼亚', role: 'Oscar', partner: '王博睿、李坤嘉'},
            {id: 18, date: '2025.02.22', time: '19:30', city: '广州', play: '阿波罗尼亚', role: 'Oscar', partner: '李苏霖、李坤嘉'},
            {id: 19, date: '2025.02.23', time: '15:00', city: '武汉', play: '火焰', role: 'Eric', partner: '秦宇星、刘秫呈'},
            {id: 20, date: '2025.02.27', time: '19:30', city: '广州', play: '阿波罗尼亚', role: 'Oscar', partner: '李苏霖、杜牧'},
            {id: 21, date: '2025.02.28', time: '19:30', city: '广州', play: '阿波罗尼亚', role: 'Oscar', partner: '李苏霖、邓欣锐'},
            {id: 22, date: '2025.03.01', time: '19:30', city: '广州', play: '阿波罗尼亚', role: 'Oscar', partner: '郑金铠、邓欣锐'},
            {id: 23, date: '2025.03.02', time: '19:30', city: '广州', play: '阿波罗尼亚', role: 'Oscar', partner: '郑金铠、邓欣锐'},
            {id: 24, date: '2025.03.05', time: '19:30', city: '广州', play: '阿波罗尼亚', role: 'Oscar', partner: '杨宇威、李玉言'},
            {id: 25, date: '2025.03.07', time: '19:30', city: '武汉', play: '火焰', role: 'Eric', partner: '郑婉霞、罗明晖'},
            {id: 26, date: '2025.03.08', time: '19:30', city: '武汉', play: '火焰', role: 'Eric', partner: '秦宇星、钱蒙楠'},
            {id: 27, date: '2025.03.09', time: '14:30', city: '广州', play: '阿波罗尼亚', role: 'Oscar', partner: '郑金铠、李坤嘉'},
            {id: 28, date: '2025.03.13', time: '19:30', city: '广州', play: '阿波罗尼亚', role: 'Oscar', partner: '郑金铠、李玉言'},
            {id: 29, date: '2025.03.15', time: '19:30', city: '长沙', play: '新刘海砍樵', role: '白头翁', partner: ''},
            {id: 30, date: '2025.03.16', time: '14:30', city: '长沙', play: '新刘海砍樵', role: '白头翁', partner: ''},
            {id: 31, date: '2025.03.18', time: '19:30', city: '广州', play: '阿波罗尼亚', role: 'Oscar', partner: '陈科铭、杜牧'},
            {id: 32, date: '2025.03.19', time: '19:30', city: '广州', play: '阿波罗尼亚', role: 'Oscar', partner: '陈科铭、杜牧'},
            {id: 33, date: '2025.03.22', time: '15:00', city: '武汉', play: '火焰', role: 'Eric', partner: '郑婉霞、刘秫呈'},
            {id: 34, date: '2025.03.22', time: '19:30', city: '武汉', play: '火焰', role: 'Eric', partner: '唐瑾、刘秫呈'},
            {id: 35, date: '2025.03.23', time: '14:30', city: '广州', play: '阿波罗尼亚', role: 'Oscar', partner: '杨宇威、杜牧'},
            {id: 36, date: '2025.03.29', time: '15:00', city: '武汉', play: '火焰', role: 'Eric', partner: '唐晨怡、张鑫澳'},
            {id: 37, date: '2025.03.30', time: '15:00', city: '武汉', play: '火焰', role: 'Eric', partner: '唐晨怡、张鑫澳'},
            {id: 38, date: '2025.04.05', time: '19:30', city: '广州', play: '阿波罗尼亚', role: 'Oscar', partner: '王博睿、杜牧'},
            {id: 39, date: '2025.04.06', time: '14:30', city: '广州', play: '阿波罗尼亚', role: 'Oscar', partner: '郑金铠、李坤嘉'},
            {id: 40, date: '2025.04.11', time: '19:30', city: '武汉', play: '火焰', role: 'Eric', partner: '廖若彤、李俊杰'},
            {id: 41, date: '2025.04.12', time: '19:30', city: '武汉', play: '火焰', role: 'Eric', partner: '郑婉霞、刘秫呈'},
            {id: 42, date: '2025.04.13', time: '14:30', city: '长沙', play: '新刘海砍樵', role: '白头翁', partner: ''},
            {id: 43, date: '2025.04.18', time: '19:30', city: '广州', play: '阿波罗尼亚', role: 'Oscar', partner: '王博睿、李坤嘉'},
            {id: 44, date: '2025.04.19', time: '14:30', city: '广州', play: '阿波罗尼亚', role: 'Oscar', partner: '郑金铠、杜牧'},
            {id: 45, date: '2025.04.20', time: '14:30', city: '广州', play: '阿波罗尼亚', role: 'Oscar', partner: '郑金铠、陈志'},
            {id: 46, date: '2025.04.26', time: '14:30', city: '广州', play: '阿波罗尼亚', role: 'Oscar', partner: '王博睿、李坤嘉'},
            {id: 47, date: '2025.05.01', time: '19:30', city: '广州', play: '阿波罗尼亚', role: 'Oscar', partner: '杨宇威、杜牧'},
            {id: 48, date: '2025.05.02', time: '19:30', city: '广州', play: '阿波罗尼亚', role: 'Oscar', partner: '王博睿、李坤嘉'},
            {id: 49, date: '2025.05.03', time: '19:30', city: '武汉', play: '火焰', role: 'Eric', partner: '郑婉霞、张鑫澳'},
            {id: 50, date: '2025.05.04', time: '15:00', city: '武汉', play: '火焰', role: 'Eric', partner: '秦宇星、张鑫澳'},
            {id: 51, date: '2025.05.05', time: '14:30', city: '广州', play: '阿波罗尼亚', role: 'Oscar', partner: '郑金铠、杜牧'},
            {id: 52, date: '2025.05.08', time: '19:30', city: '广州', play: '阿波罗尼亚', role: 'Oscar', partner: '武冠辰、巴文豪'},
            {id: 53, date: '2025.05.09', time: '19:30', city: '广州', play: '阿波罗尼亚', role: 'Oscar', partner: '陈科铭、杜牧'},
            {id: 54, date: '2025.05.16', time: '19:30', city: '长沙', play: '新刘海砍樵', role: '白头翁', partner: ''},
            {id: 55, date: '2025.05.17', time: '14:30', city: '广州', play: '阿波罗尼亚', role: 'Oscar', partner: '武冠辰、杜牧'},
            {id: 56, date: '2025.05.18', time: '14:30', city: '广州', play: '阿波罗尼亚', role: 'Oscar', partner: '杨宇威、巴文豪'},
            {id: 57, date: '2025.05.23', time: '19:30', city: '广州', play: '阿波罗尼亚', role: 'Oscar', partner: '杨宇威、杜牧'},
            {id: 58, date: '2025.05.24', time: '19:30', city: '广州', play: '阿波罗尼亚', role: 'Oscar', partner: '张梁、陈志'},
            {id: 59, date: '2025.05.25', time: '14:30', city: '长沙', play: '新刘海砍樵', role: '白头翁', partner: ''},
            {id: 60, date: '2025.06.01', time: '19:30', city: '广州', play: '阿波罗尼亚', role: 'Oscar', partner: '李苏霖、杜牧'},
            {id: 61, date: '2025.06.02', time: '14:30', city: '广州', play: '阿波罗尼亚', role: 'Oscar', partner: '张梁、李玉言'},
            {id: 62, date: '2025.06.07', time: '14:30', city: '广州', play: '阿波罗尼亚', role: 'Oscar', partner: '郑金铠、杜牧'},
            {id: 63, date: '2025.06.08', time: '14:30', city: '广州', play: '阿波罗尼亚', role: 'Oscar', partner: '郑金铠、李玉言'},
            {id: 64, date: '2025.06.14', time: '19:30', city: '广州', play: '阿波罗尼亚', role: 'Oscar', partner: '李苏霖、杜牧'},
            {id: 65, date: '2025.06.15', time: '14:30', city: '广州', play: '阿波罗尼亚', role: 'Oscar', partner: '武冠辰、巴文豪'},
            {id: 66, date: '2025.06.18', time: '19:30', city: '广州', play: '阿波罗尼亚', role: 'Oscar', partner: '张梁、李坤嘉'},
            {id: 67, date: '2025.06.19', time: '19:30', city: '广州', play: '阿波罗尼亚', role: 'Oscar', partner: '杨宇威、李坤嘉'},
            {id: 68, date: '2025.06.21', time: '15:00', city: '武汉', play: '火焰', role: 'Eric', partner: '唐晨怡、张智伟'},
            {id: 69, date: '2025.06.21', time: '19:30', city: '武汉', play: '火焰', role: 'Eric', partner: '唐瑾、罗明晖'},
            {id: 70, date: '2025.06.22', time: '14:30', city: '长沙', play: '新刘海砍樵', role: '白头翁', partner: ''},
            {id: 71, date: '2025.06.27', time: '19:30', city: '武汉', play: '火焰', role: 'Eric', partner: '陈旭、田野'},
            {id: 72, date: '2025.06.28', time: '14:30', city: '广州', play: '阿波罗尼亚', role: 'Oscar', partner: '陈科铭、李坤嘉'},
            {id: 73, date: '2025.06.29', time: '14:30', city: '广州', play: '阿波罗尼亚', role: 'Oscar', partner: '武冠辰、李坤嘉'},
            {id: 74, date: '2025.07.04', time: '19:30', city: '长沙', play: '新刘海砍樵', role: '白头翁', partner: ''},
            {id: 75, date: '2025.07.05', time: '14:30', city: '广州', play: '阿波罗尼亚', role: 'Oscar', partner: '武冠辰、巴文豪'},
            {id: 76, date: '2025.07.06', time: '14:30', city: '广州', play: '阿波罗尼亚', role: 'Oscar', partner: '张梁、邓欣锐'},
            {id: 77, date: '2025.07.11', time: '19:30', city: '广州', play: '阿波罗尼亚', role: 'Oscar', partner: '陈科铭、巴文豪'},
            {id: 78, date: '2025.07.12', time: '19:30', city: '长沙', play: '新刘海砍樵', role: '白头翁', partner: ''},
            {id: 79, date: '2025.07.13', time: '15:00', city: '长沙', play: '新刘海砍樵', role: '白头翁', partner: ''},
            {id: 80, date: '2025.07.16', time: '19:30', city: '广州', play: '阿波罗尼亚', role: 'Oscar', partner: '杨宇威、杜牧'},
            {id: 81, date: '2025.07.17', time: '19:30', city: '广州', play: '阿波罗尼亚', role: 'Oscar', partner: '武冠辰、李坤嘉'},
            {id: 82, date: '2025.07.18', time: '19:30', city: '广州', play: '阿波罗尼亚', role: 'Oscar', partner: '张梁、杜牧'},
            {id: 83, date: '2025.07.19', time: '19:30', city: '长沙', play: '新刘海砍樵', role: '白头翁', partner: ''},
            {id: 84, date: '2025.07.20', time: '19:30', city: '上海', play: '阿波罗尼亚', role: 'Oscar', partner: '王炳、牛博为'},
            {id: 85, date: '2025.07.25', time: '19:30', city: '广州', play: '阿波罗尼亚', role: 'Oscar', partner: '张梁、杜牧'},
            {id: 86, date: '2025.07.26', time: '14:30', city: '广州', play: '阿波罗尼亚', role: 'Oscar', partner: '王博睿、李坤嘉'},
            {id: 87, date: '2025.07.27', time: '14:30', city: '广州', play: '阿波罗尼亚', role: 'Oscar', partner: '王博睿、杜牧'},
            {id: 88, date: '2025.08.02', time: '19:30', city: '武汉', play: '怪物', role: 'Leo', partner: '周崇祥'},
            {id: 89, date: '2025.08.03', time: '19:30', city: '武汉', play: '怪物', role: 'Leo', partner: '黄子俊'},
            {id: 90, date: '2025.08.08', time: '19:30', city: '武汉', play: '怪物', role: 'Leo', partner: '张子扬'},
            {id: 91, date: '2025.08.09', time: '14:30', city: '广州', play: '阿波罗尼亚', role: 'Oscar', partner: '郑金铠、杜牧'},
            {id: 92, date: '2025.08.10', time: '14:30', city: '广州', play: '阿波罗尼亚', role: 'Oscar', partner: '郑金铠、李坤嘉'},
            {id: 93, date: '2025.08.13', time: '19:30', city: '广州', play: '阿波罗尼亚', role: 'Oscar', partner: '武冠辰、李玉言'},
            {id: 94, date: '2025.08.23', time: '14:30', city: '武汉', play: '怪物', role: 'Leo', partner: '周崇祥'},
            {id: 95, date: '2025.08.24', time: '19:30', city: '武汉', play: '怪物', role: 'Leo', partner: '周崇祥'},
            {id: 96, date: '2025.08.28', time: '19:30', city: '广州', play: '阿波罗尼亚', role: 'Oscar', partner: '张梁、李坤嘉'},
            {id: 97, date: '2025.08.29', time: '19:30', city: '广州', play: '阿波罗尼亚', role: 'Oscar', partner: '武冠辰、巴文豪'},
            {id: 98, date: '2025.09.05', time: '19:30', city: '武汉', play: '怪物', role: 'Leo', partner: '黄子俊'},
            {id: 99, date: '2025.09.06', time: '15:00', city: '武汉', play: '火焰', role: 'Eric', partner: '郑婉霞、刘秫呈'},
            {id: 100, date: '2025.09.06', time: '19:30', city: '武汉', play: '怪物', role: 'Leo', partner: '张子扬'},
            {id: 101, date: '2025.09.12', time: '19:30', city: '上海', play: '末日迷途', role: '威廉', partner: '张智成、林润欣、王竞琦'},
            {id: 102, date: '2025.09.14', time: '14:30', city: '上海', play: '末日迷途', role: '威廉', partner: '夏阳、潘珏辰、林燕婷'},
            {id: 103, date: '2025.09.19', time: '19:30', city: '广州', play: '阿波罗尼亚', role: 'Oscar', partner: '朱亮、巴文豪'},
            {id: 104, date: '2025.09.20', time: '14:30', city: '广州', play: '阿波罗尼亚', role: 'Oscar', partner: '武冠辰、李坤嘉'},
            {id: 105, date: '2025.09.21', time: '14:30', city: '广州', play: '阿波罗尼亚', role: 'Oscar', partner: '武冠辰、杜牧'},
            {id: 106, date: '2025.09.25', time: '19:30', city: '广州', play: '阿波罗尼亚', role: 'Oscar', partner: '武冠辰、李坤嘉'},
            {id: 107, date: '2025.09.30', time: '19:30', city: '长沙', play: '新刘海砍樵', role: '白头翁', partner: ''},
            {id: 108, date: '2025.10.01', time: '19:30', city: '广州', play: '阿波罗尼亚', role: 'Oscar', partner: '武冠辰、李坤嘉'},
            {id: 109, date: '2025.10.02', time: '19:30', city: '广州', play: '阿波罗尼亚', role: 'Oscar', partner: '郑金铠、杜牧'},
            {id: 110, date: '2025.10.03', time: '19:30', city: '广州', play: '阿波罗尼亚', role: 'Oscar', partner: '郑金铠、李坤嘉'},
            {id: 111, date: '2025.10.04', time: '19:30', city: '广州', play: '阿波罗尼亚', role: 'Oscar', partner: '张梁、巴文豪'},
            {id: 112, date: '2025.10.06', time: '19:30', city: '广州', play: '阿波罗尼亚', role: 'Oscar', partner: '张梁、杜牧'},
            {id: 113, date: '2025.10.07', time: '15:00', city: '武汉', play: '嗜血博士', role: '乔纳森', partner: '曾阵、郑婉霞'},
            {id: 114, date: '2025.10.08', time: '14:30', city: '上海', play: '末日迷途', role: '威廉', partner: '陈壬权、冯远、马小乔'},
            {id: 115, date: '2025.10.12', time: '15:00', city: '武汉', play: '火焰', role: 'Eric', partner: '秦宇星、罗明晖'},
            {id: 116, date: '2025.10.18', time: '19:30', city: '长沙', play: '新刘海砍樵', role: '白头翁', partner: ''},
            {id: 117, date: '2025.10.19', time: '14:30', city: '长沙', play: '新刘海砍樵', role: '白头翁', partner: ''},
            {id: 118, date: '2025.10.25', time: '14:30', city: '广州', play: '阿波罗尼亚', role: 'Oscar', partner: '施博威、李坤嘉'},
            {id: 119, date: '2025.10.26', time: '14:30', city: '广州', play: '阿波罗尼亚', role: 'Oscar', partner: '张梁、杜牧'},
            {id: 120, date: '2025.11.02', time: '14:30', city: '上海', play: '末日迷途', role: '威廉', partner: '陈政宇、罗玉玲、马小乔'},
            {id: 121, date: '2025.11.07', time: '19:30', city: '广州', play: '你好，我找Smith', role: 'Bobby', partner: ''},
            {id: 122, date: '2025.11.08', time: '14:30', city: '广州', play: '你好，我找Smith', role: 'Bobby', partner: ''},
            {id: 123, date: '2025.11.08', time: '19:30', city: '广州', play: '你好，我找Smith', role: 'Bobby', partner: ''},
            {id: 124, date: '2025.11.09', time: '14:30', city: '广州', play: '你好，我找Smith', role: 'Bobby', partner: ''},
            {id: 125, date: '2025.11.09', time: '19:30', city: '广州', play: '你好，我找Smith', role: 'Bobby', partner: ''},
            {id: 126, date: '2025.11.14', time: '19:30', city: '长沙', play: '新刘海砍樵', role: '白头翁', partner: ''},
            {id: 127, date: '2025.11.15', time: '14:30', city: '武汉', play: '怪物', role: 'Leo', partner: '张子扬'},
            {id: 128, date: '2025.11.15', time: '19:30', city: '武汉', play: '嗜血博士', role: '乔纳森', partner: '曾阵、郑婉霞'},
            {id: 129, date: '2025.11.16', time: '14:30', city: '上海', play: '末日迷途', role: '威廉', partner: '陈政宇、冯远、马小乔'},
            {id: 130, date: '2025.11.19', time: '19:30', city: '长沙', play: '新刘海砍樵', role: '白头翁', partner: ''},
            {id: 131, date: '2025.11.20', time: '19:30', city: '广州', play: '阿波罗尼亚', role: 'Oscar', partner: '郑金铠、巴文豪'},
            {id: 132, date: '2025.11.22', time: '14:30', city: '广州', play: '阿波罗尼亚', role: 'Oscar', partner: '张梁、杜牧'},
            {id: 133, date: '2025.11.23', time: '14:30', city: '广州', play: '阿波罗尼亚', role: 'Oscar', partner: '陈科铭、邓欣锐'},
            {id: 134, date: '2025.11.27', time: '19:30', city: '广州', play: '阿波罗尼亚', role: 'Oscar', partner: '郑金铠、李坤嘉'},
            {id: 135, date: '2025.11.30', time: '14:30', city: '广州', play: '阿波罗尼亚', role: 'Oscar', partner: '武冠辰、杜牧'},
            {id: 136, date: '2025.12.05', time: '19:30', city: '长沙', play: '新刘海砍樵', role: '白头翁', partner: ''},
            {id: 137, date: '2025.12.06', time: '14:30', city: '上海', play: '末日迷途', role: '威廉', partner: '相征、冯远、冯镝霏'},
            {id: 138, date: '2025.12.13', time: '14:30', city: '武汉', play: '怪物', role: 'Leo', partner: '邵斌'},
            {id: 139, date: '2025.12.14', time: '14:30', city: '长沙', play: '新刘海砍樵', role: '白头翁', partner: ''},
            {id: 140, date: '2025.12.18', time: '19:30', city: '广州', play: '阿波罗尼亚', role: 'Oscar', partner: '陈科铭、李坤嘉'},
            {id: 141, date: '2025.12.20', time: '14:30', city: '广州', play: '阿波罗尼亚', role: 'Oscar', partner: '郑金铠、邓欣锐'},
            {id: 142, date: '2025.12.24', time: '19:30', city: '广州', play: '阿波罗尼亚', role: 'Oscar', partner: '张梁、杜牧'},
            {id: 143, date: '2025.12.25', time: '19:30', city: '广州', play: '阿波罗尼亚', role: 'Oscar', partner: '武冠辰、巴文豪'},
            {id: 144, date: '2025.12.27', time: '14:30', city: '广州', play: '阿波罗尼亚', role: 'Oscar', partner: '武冠辰、李坤嘉'},
            {id: 145, date: '2025.12.28', time: '14:30', city: '广州', play: '阿波罗尼亚', role: 'Oscar', partner: '武冠辰、邓欣锐'},
            {id: 146, date: '2025.12.31', time: '22:00', city: '广州', play: '阿波罗尼亚', role: 'Oscar', partner: '武冠辰、巴文豪'}
            ];
            
            
            
                    // 初始化数据变量
        window.filteredData = [...window.allPerformances];
        // 添加searchIndex，初始化为1到146
        window.allPerformances.forEach((item, index) => {
            item.searchIndex = index + 1;
        });
        window.currentPage = 1;
        window.rowsPerPage = 10;
        window.searchTerm = '';
    }

    // ==================== 3. 表格渲染与分页 ====================
    function renderPerformancesTable() {
        const tbody = document.getElementById('performances-body');
        const searchInfo = document.getElementById('search-result-info');
        const totalCount = document.getElementById('total-count');
        
        if (!tbody) return;
        
        // 清空表格
        tbody.innerHTML = '';
        
        // 计算当前页数据
        const start = (currentPage - 1) * rowsPerPage;
        const end = start + rowsPerPage;
        const pageData = filteredData.slice(start, end);
        
        // 生成表格行
        pageData.forEach(performance => {
            const row = document.createElement('tr');
            row.innerHTML = `
                <td>${performance.searchIndex || performance.id}</td>
                <td>${performance.date}</td>
                <td>${performance.time}</td>
                <td>${performance.city}</td>
                <td>${performance.play}</td>
                <td>${performance.partner || '-'}</td>
            `;
            tbody.appendChild(row);
        });
        
        // 更新搜索结果信息
        if (searchInfo && totalCount) {
            totalCount.textContent = filteredData.length;
            
            if (searchTerm) {
                searchInfo.innerHTML = `搜索 "<span style="color:#ff8a00;">${searchTerm}</span>"，找到 <span style="color:#ff8a00; font-weight:bold;">${filteredData.length}</span> 场演出`;
                searchInfo.style.display = 'block';
            } else {
                searchInfo.innerHTML = `共 <span style="color:#ff8a00; font-weight:bold;">${filteredData.length}</span> 场演出`;
                searchInfo.style.display = 'block';
            }
        }
        
        // 更新分页控件
        updatePagination();
    }

    function updatePagination() {
        const totalPages = Math.ceil(filteredData.length / rowsPerPage);
        const pageInfo = document.getElementById('page-info');
        const prevBtn = document.getElementById('prev-page');
        const nextBtn = document.getElementById('next-page');
        const pageNumbers = document.getElementById('page-numbers');
        
        // 更新分页信息
        if (pageInfo) {
            pageInfo.textContent = `第${currentPage}页 / 共${totalPages}页`;
        }
        
        // 更新按钮状态
        if (prevBtn) prevBtn.disabled = currentPage === 1;
        if (nextBtn) nextBtn.disabled = currentPage === totalPages;
        
        // 更新页码按钮
        if (pageNumbers) {
            pageNumbers.innerHTML = '';
            const maxVisiblePages = 5;
            let startPage = Math.max(1, currentPage - Math.floor(maxVisiblePages / 2));
            let endPage = Math.min(totalPages, startPage + maxVisiblePages - 1);
            
            // 调整起始页
            if (endPage - startPage + 1 < maxVisiblePages) {
                startPage = Math.max(1, endPage - maxVisiblePages + 1);
            }
            
            // 添加第一页
            if (startPage > 1) {
                const firstBtn = document.createElement('button');
                firstBtn.textContent = '1';
                firstBtn.addEventListener('click', () => goToPage(1));
                pageNumbers.appendChild(firstBtn);
                
                if (startPage > 2) {
                    const ellipsis = document.createElement('span');
                    ellipsis.textContent = '...';
                    ellipsis.style.color = '#aaa';
                    ellipsis.style.padding = '0 8px';
                    ellipsis.style.alignSelf = 'center';
                    pageNumbers.appendChild(ellipsis);
                }
            }
            
            // 添加页码按钮
            for (let i = startPage; i <= endPage; i++) {
                const pageBtn = document.createElement('button');
                pageBtn.textContent = i;
                if (i === currentPage) {
                    pageBtn.classList.add('active');
                }
                pageBtn.addEventListener('click', () => goToPage(i));
                pageNumbers.appendChild(pageBtn);
            }
            
            // 添加最后一页
            if (endPage < totalPages) {
                if (endPage < totalPages - 1) {
                    const ellipsis = document.createElement('span');
                    ellipsis.textContent = '...';
                    ellipsis.style.color = '#aaa';
                    ellipsis.style.padding = '0 8px';
                    ellipsis.style.alignSelf = 'center';
                    pageNumbers.appendChild(ellipsis);
                }
                
                const lastBtn = document.createElement('button');
                lastBtn.textContent = totalPages;
                lastBtn.addEventListener('click', () => goToPage(totalPages));
                pageNumbers.appendChild(lastBtn);
            }
        }
    }

    function goToPage(page) {
        const totalPages = Math.ceil(filteredData.length / rowsPerPage);
        if (page < 1 || page > totalPages) return;
        
        currentPage = page;
        renderPerformancesTable();
        
        // 滚动到表格顶部
        const panel = document.getElementById('performances-panel');
        if (panel) {
            panel.scrollTo({ top: 0, behavior: 'smooth' });
        }
    }

    // ==================== 4. 智能搜索功能 ====================
    function initPanels() {
        // 核心数据卡片点击事件 - 新增：点击"146全年演出场次"时清空搜索框
        document.getElementById('total-performances')?.addEventListener('click', () => {
            hideAllPanels();
            document.getElementById('performances-panel').classList.add('active');
            // 清空搜索框并显示全部数据
            const searchInput = document.getElementById('search-input');
            if (searchInput) {
                searchInput.value = '';
            }
            searchPerformances('');
        });
        
        document.getElementById('total-plays')?.addEventListener('click', () => {
            hideAllPanels();
            document.getElementById('plays-panel').classList.add('active');
        });
        
        document.getElementById('total-cities')?.addEventListener('click', () => {
            hideAllPanels();
            document.getElementById('cities-panel').classList.add('active');
        });
        
        // 剧目卡片点击事件 - 自动搜索该剧目
        document.querySelectorAll('.item-card[data-play]').forEach(card => {
            card.addEventListener('click', function() {
                const playName = this.dataset.play;
                hideAllPanels();
                document.getElementById('performances-panel').classList.add('active');
                searchPerformances(playName, 'play');
            });
        });
        
        // 城市卡片点击事件 - 自动搜索该城市
        document.querySelectorAll('.item-card[data-city]').forEach(card => {
            card.addEventListener('click', function() {
                const cityName = this.dataset.city;
                hideAllPanels();
                document.getElementById('performances-panel').classList.add('active');
                searchPerformances(cityName, 'city');
            });
        });
        
        // 搜索按钮事件
        const searchBtn = document.getElementById('search-btn');
        const resetBtn = document.getElementById('reset-btn');
        const searchInput = document.getElementById('search-input');
        
        if (searchBtn) {
            searchBtn.addEventListener('click', () => {
                const term = searchInput ? searchInput.value.trim() : '';
                searchPerformances(term);
            });
        }
        
        if (resetBtn) {
            resetBtn.addEventListener('click', () => {
                if (searchInput) searchInput.value = '';
                searchTerm = '';
                searchPerformances('');
            });
        }
        
        if (searchInput) {
            searchInput.addEventListener('keyup', (e) => {
                if (e.key === 'Enter') {
                    const term = searchInput.value.trim();
                    searchPerformances(term);
                }
            });
        }
        
        // 分页按钮事件
        document.getElementById('prev-page')?.addEventListener('click', () => goToPage(currentPage - 1));
        document.getElementById('next-page')?.addEventListener('click', () => goToPage(currentPage + 1));
    }

    function searchPerformances(term = '', type = '') {
        // 更新搜索词
        const searchInput = document.getElementById('search-input');
        
        if (type === 'play' || type === 'city') {
            searchTerm = term;
            if (searchInput) searchInput.value = term;
        } else {
            searchTerm = term;
        }
        
        // 执行搜索
        if (!searchTerm) {
            filteredData = [...allPerformances];
            // 恢复原始序号
            filteredData.forEach((item, index) => {
                item.searchIndex = index + 1;
            });
        } else {
            filteredData = allPerformances.filter(p => 
                p.play.toLowerCase().includes(searchTerm.toLowerCase()) ||
                p.city.toLowerCase().includes(searchTerm.toLowerCase()) ||
                p.role.toLowerCase().includes(searchTerm.toLowerCase()) ||
                (p.partner && p.partner.toLowerCase().includes(searchTerm.toLowerCase()))
            );
            // 为搜索结果重新设置连续序号
            filteredData.forEach((item, index) => {
                item.searchIndex = index + 1;
            });
        }
        
        // 重置到第一页并重新渲染
        currentPage = 1;
        renderPerformancesTable();
        
        // 确保演出面板显示
        hideAllPanels();
        document.getElementById('performances-panel').classList.add('active');
    }

    function hideAllPanels() {
        document.querySelectorAll('.interactive-panel').forEach(panel => {
            panel.classList.remove('active');
        });
    }

// ==================== 5. 图表初始化 ====================
function initCharts() {
  /* ① 防止重复初始化（报错根源） */
  if (window.chartInitialized) return;
  window.chartInitialized = true;

  /* ② 剧目场次分布图 */
  const playCtx = document.getElementById('playChart')?.getContext('2d');
  if (playCtx) {
    window.playChart = new Chart(playCtx, {
      type: 'bar',
      data: {
        labels: ['阿波罗尼亚', '火焰', '新刘海砍樵', '怪物', '末日迷途', '你好，我找Smith', '嗜血博士'],
        datasets: [{
          label: '演出场次',
          data: [83, 22, 19, 9, 6, 5, 2],
          backgroundColor: [
            'rgba(255, 138, 0, 0.8)',  'rgba(255, 87, 104, 0.8)',
            'rgba(155, 81, 224, 0.8)', 'rgba(0, 200, 150, 0.8)',
            'rgba(65, 105, 225, 0.8)', 'rgba(255, 193, 7, 0.8)',
            'rgba(158, 158, 158, 0.8)'
          ],
          borderColor: [
            '#ff8a00', '#ff5768', '#9b51e0', '#00c896', '#4169e1', '#ffc107', '#9e9e9e'
          ],
          borderWidth: 2,
          borderRadius: 10,
          hoverBackgroundColor: [
            '#ff8a00', '#ff5768', '#9b51e0', '#00c896', '#4169e1', '#ffc107', '#ffffff'
          ]
        }]
      },
      options: {
        responsive: true,
        maintainAspectRatio: false,
        plugins: {
          legend: { display: false },
          tooltip: {
            backgroundColor: 'rgba(25, 26, 48, 0.95)',
            titleColor: '#ff8a00',
            bodyColor: '#e0e0e0',
            borderColor: '#ff8a00',
            borderWidth: 1,
            cornerRadius: 10,
            padding: 15,
            callbacks: {
              label: ctx => `场次：${ctx.raw} 场 (${((ctx.raw / 146) * 100).toFixed(1)}%)`
            }
          }
        },
        scales: {
          y: {
            beginAtZero: true,
            grid: { color: 'rgba(255,255,255,0.05)', drawBorder: false },
            ticks: { color: '#aaa', font: { size: 14 }, callback: v => v + ' 场' },
            title: { display: true, text: '演出场次', color: '#aaa', font: { size: 15, weight: 'bold' } }
          },
          x: {
            grid: { display: false },
            ticks: { color: '#ddd', font: { size: 12, weight: '500' }, maxRotation: 45, minRotation: 25, autoSkip: false, padding: 15 }
          }
        },
        animation: { duration: 2000, easing: 'easeOutQuart' }
      }
    });
  }

  /* ③ 城市分布饼图 */
  const cityCtx = document.getElementById('cityChart')?.getContext('2d');
  if (cityCtx) {
    window.cityChart = new Chart(cityCtx, {
      type: 'pie',
      data: {
        labels: ['广州', '武汉', '长沙', '上海'],
        datasets: [{
          label: '演出场次',
          data: [87, 32, 19, 8],
          backgroundColor: [
            'rgba(255, 138, 0, 0.8)', 'rgba(255, 87, 104, 0.8)',
            'rgba(155, 81, 224, 0.8)', 'rgba(65, 105, 225, 0.8)'
          ],
          borderColor: ['#ff8a00', '#ff5768', '#9b51e0', '#4169e1'],
          borderWidth: 2,
          hoverOffset: 15
        }]
      },
      options: {
        responsive: true,
        maintainAspectRatio: false,
        plugins: {
          legend: { position: 'right', labels: { color: '#e0e0e0', font: { size: 14 }, padding: 20, usePointStyle: true, pointStyle: 'circle' } },
          tooltip: {
            backgroundColor: 'rgba(25, 26, 48, 0.95)',
            titleColor: '#ff8a00',
            bodyColor: '#e0e0e0',
            borderColor: '#ff8a00',
            borderWidth: 1,
            cornerRadius: 10,
            padding: 15,
            callbacks: {
              label: ctx => `${ctx.label}: ${ctx.raw}场 (${((ctx.raw / 146) * 100).toFixed(1)}%)`
            }
          }
        },
        animation: { duration: 2000, easing: 'easeOutQuart' }
      }
    });
  }
}

// ==================== 6. 页面加载初始化 ====================
    window.addEventListener('DOMContentLoaded', function() {
        initData();                    // 初始化数据
        renderPerformancesTable();     // 渲染表格
        initPanels();                  // 初始化面板和事件
        initCharts();                  // 初始化图表
        
        // 确保分页按钮事件已绑定
        document.getElementById('prev-page')?.addEventListener('click', () => goToPage(currentPage - 1));
        document.getElementById('next-page')?.addEventListener('click', () => goToPage(currentPage + 1));
    });

// ==================== 7. 修复地图连线 ====================
function initCityMap() {
    const container = document.getElementById('cityLinesContainer');
    if (!container) return;

    // 清空容器
    container.innerHTML = '';
    
    // 等待DOM渲染完成后获取城市点位置
    setTimeout(() => {
        // 获取城市点的实际位置
        const cityElements = {
            'guangzhou': document.querySelector('.city-point.guangzhou'),
            'wuhan': document.querySelector('.city-point.wuhan'),
            'changsha': document.querySelector('.city-point.changsha'),
            'shanghai': document.querySelector('.city-point.shanghai')
        };

        // 验证所有城市点都存在
        for (const city in cityElements) {
            if (!cityElements[city]) {
                console.error(`城市点 ${city} 未找到`);
                return;
            }
        }

        // 获取地图容器尺寸和位置
        const mapContainer = document.querySelector('.city-map-container');
        const mapRect = mapContainer.getBoundingClientRect();
        
        // 计算每个城市点的中心位置（像素）
        const cityData = {};
        
        for (const city in cityElements) {
            const element = cityElements[city];
            const rect = element.getBoundingClientRect();
            
            // 计算元素中心点（像素）
            const centerXPx = rect.left + rect.width / 2;
            const centerYPx = rect.top + rect.height / 2;
            
            cityData[city] = { 
                xPx: centerXPx - mapRect.left, 
                yPx: centerYPx - mapRect.top,
                radius: rect.width / 2
            };
        }

        // 连打路线数据
        const routes = [
            { start: 'guangzhou', end: 'wuhan', count: 8, color: '#ff8a00' },
            { start: 'guangzhou', end: 'changsha', count: 8, color: '#ff5768' },
            { start: 'wuhan', end: 'changsha', count: 4, color: '#9b51e0' },
            { start: 'wuhan', end: 'shanghai', count: 2, color: '#4169e1' },
            { start: 'changsha', end: 'shanghai', count: 2, color: '#00c896' }
        ];

        // 创建每条连线
        routes.forEach(route => {
            const start = cityData[route.start];
            const end = cityData[route.end];
            
            if (!start || !end) return;

            // 计算两点之间的距离（像素）
            const dx = end.xPx - start.xPx;
            const dy = end.yPx - start.yPx;
            const distance = Math.sqrt(dx * dx + dy * dy);
            
            // 计算角度（弧度）
            const angle = Math.atan2(dy, dx) * (180 / Math.PI);
            
            // 计算单位向量
            const ux = dx / distance;
            const uy = dy / distance;
            
            // 调整起点和终点，考虑城市点的半径
            const adjustedStartX = start.xPx + ux * start.radius;
            const adjustedStartY = start.yPx + uy * start.radius;
            const adjustedEndX = end.xPx - ux * end.radius;
            const adjustedEndY = end.yPx - uy * end.radius;
            
            // 计算调整后的距离
            const adjustedDx = adjustedEndX - adjustedStartX;
            const adjustedDy = adjustedEndY - adjustedStartY;
            const adjustedDistance = Math.sqrt(adjustedDx * adjustedDx + adjustedDy * adjustedDy);
            
            // 转换回百分比（相对于地图容器）
            const startXPercent = (adjustedStartX / mapRect.width) * 100;
            const startYPercent = (adjustedStartY / mapRect.height) * 100;
            const distancePercent = (adjustedDistance / mapRect.width) * 100;

            // 创建连线元素
            const line = document.createElement('div');
            line.className = 'city-line';
            line.style.width = `${distancePercent}%`;
            line.style.left = `${startXPercent}%`;
            line.style.top = `${startYPercent}%`;
            line.style.transform = `rotate(${angle}deg)`;
            line.style.setProperty('--line-color', route.color);
            line.style.transformOrigin = '0 0';
            line.style.background = `linear-gradient(90deg, 
                transparent, 
                ${route.color}, 
                ${route.color}, 
                transparent)`;
            line.style.backgroundSize = '200% 100%';
            line.style.animation = 'lineFlow 3s linear infinite';
            line.style.zIndex = '5';
            line.style.opacity = '0.8';

            // 创建飞行点
            const dot = document.createElement('div');
            dot.className = 'flying-dot';
            dot.style.background = route.color;
            dot.style.boxShadow = `0 0 20px ${route.color}`;
            dot.style.setProperty('--dot-color', route.color);
            dot.style.animation = `flyDot 3s linear infinite`;
            dot.style.animationDelay = `${Math.random() * 2}s`;

            line.appendChild(dot);
            container.appendChild(line);
        });
        
        // 添加窗口resize事件监听
        let resizeTimeout;
        const handleResize = () => {
            clearTimeout(resizeTimeout);
            resizeTimeout = setTimeout(initCityMap, 250);
        };
        window.addEventListener('resize', handleResize);
        
        // 清理函数
        return () => window.removeEventListener('resize', handleResize);
    }, 100);
}
      // ==================== 8. 图片弹窗功能 ====================
        function initPhotoModals() {
            const modal = document.getElementById('photo-modal');
            const modalPhoto = document.getElementById('modal-photo');
            const modalTitle = document.getElementById('modal-title');
            const modalDesc = document.getElementById('modal-desc');
            const modalClose = document.getElementById('modal-close');
            
            if (!modal || !modalPhoto || !modalTitle || !modalDesc || !modalClose) return;

            // 时间轴项目点击 - 显示图片弹窗
            document.querySelectorAll('.timeline-item').forEach(item => {
                item.addEventListener('click', function() {
                    const photo = this.dataset.photo || 'https://images.unsplash.com/photo-1511379938547-c1f69419868d?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80';
                    const date = this.querySelector('.date')?.textContent?.trim() || '';
                    const content = this.querySelector('.content')?.textContent?.trim() || '';
                    
                    modalPhoto.src = photo;
                    modalTitle.textContent = content.replace(/\s*<span class="label">.*?<\/span>\s*/, '');
                    modalDesc.textContent = date;
                    modal.classList.add('active');
                    document.body.style.overflow = 'hidden';
                });
            });

            // 演员卡片点击 - 显示图片弹窗
            document.querySelectorAll('.partner-card').forEach(card => {
                card.addEventListener('click', function() {
                    const photo = this.dataset.photo || 'https://images.unsplash.com/photo-1511379938547-c1f69419868d?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80';
                    const name = this.querySelector('.name')?.textContent || '';
                    const count = this.querySelector('.count')?.textContent || '';
                    const desc = this.querySelector('.desc')?.textContent || '';
                    
                    modalPhoto.src = photo;
                    modalTitle.textContent = `${name} & 曾鑫`;
                    modalDesc.textContent = `合作场次：${count} | ${desc}`;
                    modal.classList.add('active');
                    document.body.style.overflow = 'hidden';
                });
            });

            // 关闭弹窗
            modalClose.addEventListener('click', () => {
                modal.classList.remove('active');
                document.body.style.overflow = 'auto';
            });

            // 点击背景关闭
            modal.addEventListener('click', (e) => {
                if (e.target === modal) {
                    modal.classList.remove('active');
                    document.body.style.overflow = 'auto';
                }
            });

            // ESC键关闭
            document.addEventListener('keydown', (e) => {
                if (e.key === 'Escape' && modal.classList.contains('active')) {
                    modal.classList.remove('active');
                    document.body.style.overflow = 'auto';
                }
            });
        }

        // ==================== 8. 通用交互初始化 ====================
        function initInteractions() {
            // 数据卡片悬停效果
            document.querySelectorAll('.data-card').forEach(card => {
                card.addEventListener('mouseenter', function() {
                    this.style.transform = 'translateY(-12px) scale(1.02)';
                });
                card.addEventListener('mouseleave', function() {
                    this.style.transform = 'translateY(0) scale(1)';
                });
            });

            // 演员卡片悬停效果
            document.querySelectorAll('.partner-card').forEach(card => {
                card.addEventListener('mouseenter', function() {
                    this.style.zIndex = '10';
                });
                card.addEventListener('mouseleave', function() {
                    this.style.zIndex = '';
                });
            });

            // 时间轴标签点击效果
            document.querySelectorAll('.label').forEach(label => {
                label.addEventListener('click', function(e) {
                    e.stopPropagation(); // 防止触发父元素点击事件
                    this.style.transform = 'scale(1.1)';
                    setTimeout(() => {
                        this.style.transform = '';
                    }, 300);
                });
            });

            // 滚动动画
            const observerOptions = {
                threshold: 0.1,
                rootMargin: '0px 0px -100px 0px'
            };
            
            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        entry.target.style.opacity = '1';
                        entry.target.style.transform = 'translateY(0)';
                        observer.unobserve(entry.target);
                    }
                });
            }, observerOptions);

            // 观察需要动画的元素
            const animateElements = document.querySelectorAll(
                '.data-card, .partner-card, .timeline-item, .chart-wrap, .summary-card'
            );
            
            animateElements.forEach(el => {
                el.style.opacity = '0';
                el.style.transform = 'translateY(30px)';
                el.style.transition = 'opacity 0.8s ease, transform 0.8s ease';
                observer.observe(el);
            });

            // 页面加载动画
            setTimeout(() => {
                document.querySelector('.report-container').style.opacity = '1';
                document.querySelector('.report-container').style.transform = 'translateY(0)';
            }, 300);
        }

// =============== 搭档组合弹窗 ===============
const combinationSchedules = {
  '武冠辰_巴文豪': {
    count: 6, plays: ['阿波罗尼亚'],
    schedules: [
      {date:'2025.05.08',time:'19:30',city:'广州',play:'阿波罗尼亚'},
      {date:'2025.06.15',time:'14:30',city:'广州',play:'阿波罗尼亚'},
      {date:'2025.07.05',time:'14:30',city:'广州',play:'阿波罗尼亚'},
      {date:'2025.08.29',time:'19:30',city:'广州',play:'阿波罗尼亚'},
      {date:'2025.12.25',time:'19:30',city:'广州',play:'阿波罗尼亚'},
      {date:'2025.12.31',time:'22:00',city:'广州',play:'阿波罗尼亚'},
    ]
  },
  '武冠辰_李坤嘉': {
    count: 6, plays: ['阿波罗尼亚'],
    schedules: [
      {date:'2025.06.29',time:'14:30',city:'广州',play:'阿波罗尼亚'},
      {date:'2025.07.17',time:'19:30',city:'广州',play:'阿波罗尼亚'},
      {date:'2025.09.20',time:'14:30',city:'广州',play:'阿波罗尼亚'},
      {date:'2025.09.25',time:'19:30',city:'广州',play:'阿波罗尼亚'},
      {date:'2025.10.01',time:'19:30',city:'广州',play:'阿波罗尼亚'},
      {date:'2025.12.27',time:'14:30',city:'广州',play:'阿波罗尼亚'},
    ]
  },
  '张梁_杜牧': {
    count: 6, plays: ['阿波罗尼亚'],
    schedules: [
      {date:'2025.07.18',time:'19:30',city:'广州',play:'阿波罗尼亚'},
      {date:'2025.07.25',time:'19:30',city:'广州',play:'阿波罗尼亚'},
      {date:'2025.10.06',time:'19:30',city:'广州',play:'阿波罗尼亚'},
      {date:'2025.10.26',time:'14:30',city:'广州',play:'阿波罗尼亚'},
      {date:'2025.11.22',time:'14:30',city:'广州',play:'阿波罗尼亚'},
      {date:'2025.12.24',time:'19:30',city:'广州',play:'阿波罗尼亚'},
    ]
  },
  '杨宇威_杜牧': {
    count: 5, plays: ['阿波罗尼亚'],
    schedules: [
      {date:'2025.01.05',time:'14:30',city:'广州',play:'阿波罗尼亚'},
      {date:'2025.03.23',time:'14:30',city:'广州',play:'阿波罗尼亚'},
      {date:'2025.05.01',time:'19:30',city:'广州',play:'阿波罗尼亚'},
      {date:'2025.05.23',time:'19:30',city:'广州',play:'阿波罗尼亚'},
      {date:'2025.07.16',time:'19:30',city:'广州',play:'阿波罗尼亚'},
    ]
  },
  '王博睿_李坤嘉': {
    count: 5, plays: ['阿波罗尼亚'],
    schedules: [
      {date:'2025.02.21',time:'19:30',city:'广州',play:'阿波罗尼亚'},
      {date:'2025.04.18',time:'19:30',city:'广州',play:'阿波罗尼亚'},
      {date:'2025.04.26',time:'14:30',city:'广州',play:'阿波罗尼亚'},
      {date:'2025.05.02',time:'19:30',city:'广州',play:'阿波罗尼亚'},
      {date:'2025.07.26',time:'14:30',city:'广州',play:'阿波罗尼亚'},
    ]
  },
  '郑金铠_李坤嘉': {
    count: 5, plays: ['阿波罗尼亚'],
    schedules: [
      {date:'2025.03.09',time:'14:30',city:'广州',play:'阿波罗尼亚'},
      {date:'2025.04.06',time:'14:30',city:'广州',play:'阿波罗尼亚'},
      {date:'2025.08.10',time:'14:30',city:'广州',play:'阿波罗尼亚'},
      {date:'2025.10.03',time:'19:30',city:'广州',play:'阿波罗尼亚'},
      {date:'2025.11.27',time:'19:30',city:'广州',play:'阿波罗尼亚'},
    ]
  }
};

function initCombinationModal(){
  const modal = document.getElementById('schedule-modal');
  if (!modal) return;
  document.querySelectorAll('.combination-card').forEach(card => {
    card.addEventListener('click', () => {
      const combo = card.dataset.combo;
      const data = combinationSchedules[combo];
      if (!data) return;
      const [a,b] = combo.split('_');
      document.querySelectorAll('.combination-info .avatar').forEach((el,i) => el.textContent = [a,b][i].charAt(0));
      document.getElementById('combination-title').textContent = a + ' & ' + b;
      document.getElementById('combination-count').textContent = data.count + ' 次';
      document.getElementById('combination-plays').textContent = data.plays.join('、');
      const list = document.getElementById('schedule-list');
      list.innerHTML = '';
      data.schedules.forEach(s => {
        const div = document.createElement('div'); div.className = 'schedule-item';
        div.innerHTML = `
          <div class="schedule-item-header">
            <span class="schedule-date">${s.date}</span>
            <span class="schedule-time">${s.time}</span>
          </div>
          <div class="schedule-details">
            <span class="schedule-play">${s.play}</span>
            <span class="schedule-city">${s.city}</span>
          </div>`;
        list.appendChild(div);
      });
      modal.classList.add('active');
      document.body.style.overflow = 'hidden';
    });
  });
  const close = () => { modal.classList.remove('active'); document.body.style.overflow = 'auto'; };
  document.getElementById('schedule-modal-close').onclick = close;
  document.getElementById('schedule-close-btn').onclick = close;
  modal.addEventListener('click', e => { if (e.target === modal) close(); });
  document.addEventListener('keydown', e => { if (e.key === 'Escape' && modal.classList.contains('active')) close(); });
modal.scrollTop = 0; 

}
initCombinationModal();

</script>
<!-- 搭档排期弹窗：必须紧贴在 </body> 之前，且位于 photo-modal 之后 -->
<div class="schedule-modal" id="schedule-modal">
  <div class="schedule-modal-content">
    <div class="modal-header">
      <h3 id="combination-title"></h3>
      <button class="modal-close-btn" id="schedule-modal-close">&times;</button>
    </div>

    <div class="combination-info">
      <div class="combination-avatars">
      </div>
      <div class="combination-stats">
        <div>合作次数：<span id="combination-count"></span></div>
        <div>合作剧目：<span id="combination-plays"></span></div>
      </div>
    </div>

    <div class="schedule-list-container">
      <h4>排期明细</h4>
      <div id="schedule-list"></div>
    </div>

    <div class="modal-footer">
      <button class="close-btn" id="schedule-close-btn">关闭</button>
    </div>
  </div>
</div>
</body>
</html>

